!function(){$(function(){$.each($(".partners"),function(){new n($(this))}),$.each($(".catalog"),function(){new n($(this))}),$.each($(".sub-menu"),function(){new n($(this))}),$.each($(".mobile-menu"),function(){new e($(this))})});var e=function(e){var n=e,i=$(".mobile-menu-btn"),t=function(){s()},s=function(){i.on("click",function(){$(this).hasClass("close")?a():o()})},o=function(){i.addClass("close"),n.addClass("visible")},a=function(){i.removeClass("close"),n.removeClass("visible")};t()},n=function(e){var n,i,t,s=e,o=s.find(".partners__swiper"),a=s.find(".sub-menu__swiper"),r=s.find(".catalog__swiper"),c=s.find(".partners__swiper-prev"),d=s.find(".catalog__swiper-prev"),u=s.find(".partners__swiper-next"),l=s.find(".catalog__swiper-next"),f=$(window),p=function(){n=new Swiper(o,{autoplay:1e4,speed:500,effect:"slide",slidesPerView:"auto",loop:!0,loopedSlides:20,spaceBetween:80,nextButton:u,prevButton:c}),i=new Swiper(r,{autoplay:1e4,speed:500,effect:"slide",slidesPerView:3,loop:!0,nextButton:l,prevButton:d,breakpoints:{767:{slidesPerView:1},1199:{slidesPerView:2}}}),t=new Swiper(a,{autoplay:!1,speed:500,effect:"slide",slidesPerView:"auto",onSlideChangeStart:function(){s.removeClass("start"),a[0].swiper.slideTo(t.find(".active").index(),200,!1)},onSlideChangeEnd:function(){s.removeClass("end")},onReachBeginning:function(){s.addClass("start"),s.removeClass("end"),setTimeout(function(){s.addClass("start")},300)},onReachEnd:function(){s.addClass("end"),setTimeout(function(){s.removeClass("start")},300)}})},w=function(){f.outerWidth()<=767&&p(),f.on({resize:function(){f.outerWidth()>=767?h():p()}})},h=function(){a[0].swiper.destroy(!1,!0)},v=function(){w(),p()};v()}}();
!function(){"use strict";$(function(){$.each($(".media-gallery"),function(){new i($(this))})});var i=function(i){var e=i,n=$("body"),a=e.find(".media-gallery__wrap"),o=e.find(".media-gallery__switcher"),s=o.find("button"),r=e.find(".media-gallery__cover"),d=e.find(".preloader"),c=e.find(".media-gallery__more"),l=n.data("action"),u=($(window),!1),p=!0,f=!1,h=new XMLHttpRequest,v=function(){s.on("click",function(){var i=$(this),t=i.data("type");return s.removeClass("active"),i.addClass("active"),a.isotope({filter:"."+t}),f=!0,!1}),c.on({click:function(){return C(),!1}}),e.on("click",".media-gallery__item",function(){return t($(this),$(this).index()),!1})},m=function(i){0!==e.attr("data-loaded-group")&&u&&w();var t,n=i.has_items,o=i.items;$.each(o,function(){var i=this;t=$('<div class="media-gallery__item new '+i.type+'"><img src="'+i.dummy+'" alt="'+i.type+'"/></div>'),a.append(t)});var s=a.find(".new");setTimeout(function(){g(n,s)},550),setTimeout(function(){y()},500),e.attr("data-loaded-group",+e.attr("data-loaded-group")+1)},w=function(){a.isotope("destroy"),u=!1},g=function(i,t){var e=500;p&&(e=1),r.animate({height:a.outerHeight()},{duration:e,complete:function(){r.css("height",""),t.each(function(i){_($(this),i)}),0==i&&b()}}),p&&setTimeout(function(){p=!1},500)},_=function(i,t){var e=100;p&&(e=1),setTimeout(function(){i.removeClass("new")},t*e)},y=function(){var i=".media-gallery__item";u=!0,a.isotope({itemSelector:i,percentPosition:!0,masonry:{columnWidth:".media-gallery__sizer"}}),f&&a.isotope({filter:"."+s.filter(".active").data("type")}),setTimeout(function(){d.removeClass("active")},300)},b=function(){c.css("opacity",0),setTimeout(function(){c.css("padding",0),c.animate({height:0},{duration:500,complete:function(){c.remove()}})},300)},C=function(){var i=l;d.addClass("active"),h.abort(),h=$.ajax({url:i,data:{action:"gallary",page:e.attr("data-loaded-group"),type:s.data("type")},dataType:"json",timeout:2e4,type:"GET",success:function(i){r.height(r.height()),m(i)},error:function(i){"abort"!=i.statusText&&alert("Error!")}})},T=function(){C(),v()};T()},t=function(i,t){var e=this,n=i,a=$("body"),o=n.parent(),s=n.parents(".media-gallery"),r=$("html"),d=$(window),c=o.find(".media-gallery__item img"),l=null,u=null,p=null,f=null,h=null,v=null,m=null,w=null,g=null,_=function(){d.on({resize:function(){P()}}),u.parent().on({click:function(){T()}}),u.on({click:function(i){i.stopPropagation()}}),p.on({click:function(){return T(),!1}})},y=function(){s.attr("data-loaded-type");l=$('<div class="swiper-popup">                                    <div class="swiper-container">                                        <div class="swiper-wrapper"></div>                                        <div class="swiper-pagination"></div>                                        <div class="swiper-button-next"></div>                                        <div class="swiper-button-prev"></div>                                    </div>                                </div>'),f=l.find(".swiper-wrapper"),h=l.find(".swiper-container"),v=l.find(".swiper-pagination"),m=l.find(".swiper-button-next"),w=l.find(".swiper-button-prev")},b=function(){var i=l.find(".swiper-slide-active"),t=i.find("[data-src]").data("src"),e=$('<iframe src="'+t+'"> frameborder="0" allowfullscreen></iframe>');$(".swiper-slide-active").find(".swiper-popup__video").prepend(e)},C=function(){y(),k(),E(),g.slideTo(t,0),l.addClass("active"),S(),g.onResize()},T=function(){l.removeClass("active"),setTimeout(function(){r.css({overflow:"",paddingRight:""}),l.remove()},300)},k=function(){$.each(c,function(){var i=null,t=null,e=null;$(this).hasClass("media-gallery__item_video")?(e='<i class="fa fa-spinner fa-spin"></i>',i='<div class="swiper-popup__video"/>',t='data-src="'+$(this).attr("href")+'"'):(e="",i='<img src="'+$(this).attr("src")+'">',t="");var n=$('<div class="swiper-slide">                                        <div class="swiper-popup__inner" '+t+'>                                            <a href="#" class="swiper-popup__close"></a>                                            '+e+"                                            "+i+'                                            <span class="swiper-slide__title">'+$(this).attr("title")+"</span>                                        </div>                                    </div>");f.append(n),n.find("img").on({load:function(){$(this).attr("data-width",this.width),$(this).attr("data-height",this.height),z(this.width,this.height,$(this))}})}),a.append(l),u=l.find(".swiper-popup__inner"),p=l.find(".swiper-popup__close")},x=function(){var i=document.createElement("div"),t=null;return document.body.appendChild(i),t=i.offsetWidth-i.clientWidth,document.body.removeChild(i),t},E=function(){g=new Swiper(h,{pagination:v,nextButton:m,prevButton:w,slidesPerView:1,paginationClickable:!0,onSlideChangeEnd:function(){j(),$(".swiper-slide-active").find("[data-src]").length&&b()}})},R=function(){C(),_(),n[0].obj=e},j=function(){var i=l.find(".swiper-slide"),t=i.find(".swiper-popup__video iframe");t.remove()},z=function(i,t,e){var n=0;n=l.width()/i>l.height()/t?l.height()/t:l.width()/i,n>=1?e.css({width:.85*i,height:.85*t}):e.css({width:n*i*.85,height:n*t*.85})},P=function(){$.each(f.find("img"),function(){z($(this).data("width"),$(this).data("height"),$(this))})},S=function(){r.css({overflow:"hidden",paddingRight:x()})};R()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5pbmRleC5qcyIsImpxdWVyeS5tZWRpYS1nYWxsZXJ5LmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiU2xpZGVycyIsInRoaXMiLCJNZW51Iiwib2JqIiwiX29iaiIsIl9idG4iLCJfY29uc3RydWN0b3IiLCJfb25FdmVudHMiLCJvbiIsImhhc0NsYXNzIiwiX2Nsb3NlTWVudSIsIl9vcGVuTWVudSIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJfcGFydG5lcnMiLCJfY2F0YWxvZyIsIl9zdWJNZW51IiwiX3BhcnRuZXJzU2xpZGVyIiwiZmluZCIsIl9zdWJNZW51U2xpZGVyIiwiX2NhdGFsb2dTbGlkZXIiLCJfcGFydG5lcnNQcmV2IiwiX2NhdGFsb2dQcmV2IiwiX3BhcnRuZXJzTmV4dCIsIl9jYXRhbG9nTmV4dCIsIl93aW5kb3ciLCJ3aW5kb3ciLCJfaW5pdFNsaWRlciIsIlN3aXBlciIsImF1dG9wbGF5Iiwic3BlZWQiLCJlZmZlY3QiLCJzbGlkZXNQZXJWaWV3IiwibG9vcCIsImxvb3BlZFNsaWRlcyIsInNwYWNlQmV0d2VlbiIsIm5leHRCdXR0b24iLCJwcmV2QnV0dG9uIiwiYnJlYWtwb2ludHMiLCI3NjciLCIxMTk5Iiwib25TbGlkZUNoYW5nZVN0YXJ0Iiwic3dpcGVyIiwic2xpZGVUbyIsImluZGV4Iiwib25TbGlkZUNoYW5nZUVuZCIsIm9uUmVhY2hCZWdpbm5pbmciLCJzZXRUaW1lb3V0Iiwib25SZWFjaEVuZCIsIl9vbkV2ZW50Iiwib3V0ZXJXaWR0aCIsInJlc2l6ZSIsIl9kZXN0cm95U2xpZGVyIiwiZGVzdHJveSIsIl9pbml0IiwiTWVkaWFHYWxsZXJ5IiwiX2JvZHkiLCJfd3JhcHBlciIsIl9zd2l0Y2hlciIsIl9zd2l0Y2hCdG4iLCJfY292ZXIiLCJfcHJlbG9hZGVyIiwiX2J0bk1vcmUiLCJfZmlsZUxpbmsiLCJkYXRhIiwiX2lzR2FsbGVyeSIsIl9maXJzdEdyb3VwIiwiX2ZpbHRlckZsYWciLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiY3VyQnRuIiwiY3VyVHlwZSIsImlzb3RvcGUiLCJmaWx0ZXIiLCJjbGljayIsIl9sb2FkTmV3SXRlbXMiLCJTd2lwZXJQb3B1cCIsIl9hZGRHYWxsZXJ5Q29udGVudCIsIm1zZyIsImF0dHIiLCJfZGVzdHJveUdhbGxlcnkiLCJuZXdCbG9jayIsImhhc0l0ZW1zIiwiaGFzX2l0ZW1zIiwiZ2V0SXRlbXMiLCJpdGVtcyIsImN1ckl0ZW0iLCJ0eXBlIiwiZHVtbXkiLCJhcHBlbmQiLCJuZXdJdGVtcyIsIl9oZWlnaHRBbmltYXRpb24iLCJfaW5pdEdhbGxlcnkiLCJkdXJhdGlvbiIsImFuaW1hdGUiLCJoZWlnaHQiLCJvdXRlckhlaWdodCIsImNvbXBsZXRlIiwiY3NzIiwiaSIsIl9zaG93TmV3SXRlbXMiLCJfcmVtb3ZlQnRuTW9yZSIsIml0ZW0iLCJkZWxheSIsIndyYXBJdGVtIiwiaXRlbVNlbGVjdG9yIiwicGVyY2VudFBvc2l0aW9uIiwibWFzb25yeSIsImNvbHVtbldpZHRoIiwicmVtb3ZlIiwicGF0aCIsImFib3J0IiwiYWpheCIsInVybCIsImFjdGlvbiIsInBhZ2UiLCJkYXRhVHlwZSIsInRpbWVvdXQiLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXNUZXh0IiwiYWxlcnQiLCJfc2VsZiIsInBhcmVudCIsIl9nYWxsZXJ5V3JhcCIsInBhcmVudHMiLCJfaHRtbCIsIl9saW5rcyIsIl9wb3B1cCIsIl9wb3B1cElubmVyIiwiX3BvcHVwQ2xvc2UiLCJfc3dpcGVyV3JhcHBlciIsIl9zd2lwZXJDb250YWluZXIiLCJfc3dpcGVyUGFnaW5hdGlvbiIsIl9zd2lwZXJCdG5OZXh0IiwiX3N3aXBlckJ0blByZXYiLCJfc3dpcGVyIiwiX2FkZEV2ZW50cyIsIl9zZXRQaWN0dXJlU2l6ZVdoZW5SZXNpemUiLCJfY2xvc2VQb3B1cCIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiX2FkZGluZ1ZhcmlhYmxlcyIsIl9hZGRWaWRlbyIsImFjdGl2ZVNsaWRlIiwic3JjIiwiaW5uZXJDb250ZW50IiwicHJlcGVuZCIsIl9idWlsZFBvcHVwIiwiX2NvbnRlbnRGaWxsaW5nIiwiX2luaXRTd2lwZXIiLCJfc2V0U3R5bGVzIiwib25SZXNpemUiLCJvdmVyZmxvdyIsInBhZGRpbmdSaWdodCIsImRhdGFTUkMiLCJwcmVsb2FkZXIiLCJuZXdJdGVtIiwibG9hZCIsIndpZHRoIiwiX3NldFBpY3R1cmVTaXplIiwiX2dldFNjcm9sbFdpZHRoIiwic2Nyb2xsRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2Nyb2xsYmFyV2lkdGgiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJvZmZzZXRXaWR0aCIsImNsaWVudFdpZHRoIiwicmVtb3ZlQ2hpbGQiLCJwYWdpbmF0aW9uIiwicGFnaW5hdGlvbkNsaWNrYWJsZSIsIl9yZW1vdmVWaWRlbyIsImxlbmd0aCIsInZpZGVvRnJhbWUiLCJwaWNXaWR0aCIsInBpY0hlaWdodCIsInBpYyIsImsiXSwibWFwcGluZ3MiOiJDQUFBLFdBRUlBLEVBQUcsV0FFQ0EsRUFBRUMsS0FBTUQsRUFBRyxhQUFlLFdBQ3RCLEdBQUlFLEdBQVVGLEVBQUdHLFNBR3JCSCxFQUFFQyxLQUFNRCxFQUFHLFlBQWMsV0FDckIsR0FBSUUsR0FBVUYsRUFBR0csU0FJckJILEVBQUVDLEtBQU1ELEVBQUcsYUFBZSxXQUN0QixHQUFJRSxHQUFVRixFQUFHRyxTQUdyQkgsRUFBRUMsS0FBTUQsRUFBRyxnQkFBa0IsV0FDekIsR0FBSUksR0FBT0osRUFBR0csVUFLdEIsSUFBSUMsR0FBTyxTQUFVQyxHQUdqQixHQUFJQyxHQUFPRCxFQUNQRSxFQUFPUCxFQUFHLG9CQUdWUSxFQUFlLFdBQ1hDLEtBRUpBLEVBQVksV0FFUkYsRUFBS0csR0FBSSxRQUFTLFdBRVRWLEVBQUdHLE1BQU1RLFNBQVUsU0FDcEJDLElBRUFDLE9BTVpBLEVBQVksV0FDUk4sRUFBS08sU0FBVSxTQUNmUixFQUFLUSxTQUFVLFlBRW5CRixFQUFhLFdBQ1RMLEVBQUtRLFlBQWEsU0FDbEJULEVBQUtTLFlBQWEsV0FPMUJQLE1BSUFOLEVBQVUsU0FBVUcsR0FHcEIsR0FRSVcsR0FDQUMsRUFDQUMsRUFWQVosRUFBT0QsRUFDUGMsRUFBa0JiLEVBQUtjLEtBQU0scUJBQzdCQyxFQUFpQmYsRUFBS2MsS0FBTSxxQkFDNUJFLEVBQWlCaEIsRUFBS2MsS0FBTSxvQkFDNUJHLEVBQWdCakIsRUFBS2MsS0FBTSwwQkFDM0JJLEVBQWVsQixFQUFLYyxLQUFNLHlCQUMxQkssRUFBZ0JuQixFQUFLYyxLQUFNLDBCQUMzQk0sRUFBZXBCLEVBQUtjLEtBQU0seUJBSTFCTyxFQUFVM0IsRUFBRzRCLFFBR2JDLEVBQWMsV0FFVmIsRUFBWSxHQUFJYyxRQUFTWCxHQUNyQlksU0FBVSxJQUNWQyxNQUFPLElBQ1BDLE9BQVEsUUFDUkMsY0FBZSxPQUNmQyxNQUFNLEVBQ05DLGFBQWMsR0FDZEMsYUFBYyxHQUNkQyxXQUFZYixFQUNaYyxXQUFZaEIsSUFHaEJOLEVBQVcsR0FBSWEsUUFBU1IsR0FDcEJTLFNBQVUsSUFDVkMsTUFBTyxJQUNQQyxPQUFRLFFBQ1JDLGNBQWUsRUFDZkMsTUFBTSxFQUNORyxXQUFZWixFQUNaYSxXQUFZZixFQUNaZ0IsYUFDSUMsS0FDSVAsY0FBZSxHQUVuQlEsTUFDSVIsY0FBZSxNQUszQmhCLEVBQVcsR0FBSVksUUFBU1QsR0FDcEJVLFVBQVUsRUFDVkMsTUFBTyxJQUNQQyxPQUFRLFFBQ1JDLGNBQWUsT0FDZlMsbUJBQW9CLFdBQ2hCckMsRUFBS1MsWUFBYSxTQUNsQk0sRUFBZSxHQUFHdUIsT0FBT0MsUUFBUzNCLEVBQVNFLEtBQU0sV0FBWTBCLFFBQVUsS0FBSyxJQUVoRkMsaUJBQWtCLFdBQ2R6QyxFQUFLUyxZQUFhLFFBRXRCaUMsaUJBQWtCLFdBQ2QxQyxFQUFLUSxTQUFVLFNBQ2ZSLEVBQUtTLFlBQWEsT0FFbEJrQyxXQUFZLFdBQ1IzQyxFQUFLUSxTQUFVLFVBQ2pCLE1BR05vQyxXQUFZLFdBQ1I1QyxFQUFLUSxTQUFVLE9BRWZtQyxXQUFZLFdBQ1IzQyxFQUFLUyxZQUFhLFVBQ3BCLFNBS2RvQyxFQUFXLFdBRUZ4QixFQUFReUIsY0FBZ0IsS0FDekJ2QixJQUdKRixFQUFRakIsSUFDSjJDLE9BQVUsV0FFRDFCLEVBQVF5QixjQUFnQixJQUN6QkUsSUFFQXpCLFFBT2hCeUIsRUFBaUIsV0FFYmpDLEVBQWdCLEdBQUl1QixPQUFPVyxTQUFTLEdBQU8sSUFHL0NDLEVBQVEsV0FDSkwsSUFDQXRCLElBT1IyQjtDQ2hMUixXQUVJLFlBRUF4RCxHQUFFLFdBRUVBLEVBQUVDLEtBQU1ELEVBQUcsa0JBQW9CLFdBRTNCLEdBQUl5RCxHQUFlekQsRUFBR0csVUFNOUIsSUFBSXNELEdBQWUsU0FBVXBELEdBRXpCLEdBQUlDLEdBQU9ELEVBQ1BxRCxFQUFRMUQsRUFBRyxRQUNYMkQsRUFBV3JELEVBQUtjLEtBQU0sd0JBQ3RCd0MsRUFBWXRELEVBQUtjLEtBQU0sNEJBQ3ZCeUMsRUFBYUQsRUFBVXhDLEtBQU0sVUFDN0IwQyxFQUFTeEQsRUFBS2MsS0FBTSx5QkFDcEIyQyxFQUFhekQsRUFBS2MsS0FBTSxjQUN4QjRDLEVBQVcxRCxFQUFLYyxLQUFNLHdCQUN0QjZDLEVBQVlQLEVBQU1RLEtBQU0sVUFFeEJDLEdBRFVuRSxFQUFHNEIsU0FDQSxHQUNid0MsR0FBYyxFQUNkQyxHQUFjLEVBQ2RDLEVBQVcsR0FBSUMsZ0JBRWY5RCxFQUFZLFdBRVJvRCxFQUFXbkQsR0FBSSxRQUFTLFdBRXBCLEdBQUk4RCxHQUFTeEUsRUFBR0csTUFDWnNFLEVBQVVELEVBQU9OLEtBQU0sT0FRM0IsT0FOQUwsR0FBVzlDLFlBQWEsVUFDeEJ5RCxFQUFPMUQsU0FBVSxVQUNqQjZDLEVBQVNlLFNBQVdDLE9BQVEsSUFBS0YsSUFFakNKLEdBQWMsR0FFUCxJQUlYTCxFQUFTdEQsSUFDTGtFLE1BQU8sV0FFSCxNQURBQyxNQUNPLEtBSWZ2RSxFQUFLSSxHQUFJLFFBQVMsdUJBQXdCLFdBR3RDLE1BREFvRSxHQUFhOUUsRUFBR0csTUFBUUgsRUFBR0csTUFBTzJDLFVBQzNCLEtBS2ZpQyxFQUFxQixTQUFXQyxHQUVjLElBQXJDMUUsRUFBSzJFLEtBQU0sc0JBQStCZCxHQUMzQ2UsR0FHSixJQUVJQyxHQUZBQyxFQUFXSixFQUFJSyxVQUNmQyxFQUFXTixFQUFJTyxLQUduQnZGLEdBQUVDLEtBQU1xRixFQUFVLFdBRWQsR0FBSUUsR0FBVXJGLElBRWRnRixHQUFXbkYsRUFBRyx1Q0FBd0N3RixFQUFRQyxLQUFNLGVBQ2xERCxFQUFRRSxNQUFPLFVBQVdGLEVBQVFDLEtBQU0sYUFHMUQ5QixFQUFTZ0MsT0FBUVIsSUFJckIsSUFBSVMsR0FBV2pDLEVBQVN2QyxLQUFNLE9BRTlCNkIsWUFBWSxXQUNSNEMsRUFBa0JULEVBQVVRLElBQzdCLEtBRUgzQyxXQUFZLFdBQ1I2QyxLQUNELEtBRUh4RixFQUFLMkUsS0FBTSxxQkFBc0IzRSxFQUFLMkUsS0FBTSxxQkFBc0IsSUFHdEVDLEVBQWtCLFdBRWR2QixFQUFTZSxRQUFTLFdBQ2xCUCxHQUFhLEdBR2pCMEIsRUFBbUIsU0FBVVQsRUFBVVEsR0FFbkMsR0FBSUcsR0FBVyxHQUVWM0IsS0FDRDJCLEVBQVcsR0FHZmpDLEVBQU9rQyxTQUNIQyxPQUFRdEMsRUFBU3VDLGdCQUVqQkgsU0FBVUEsRUFDVkksU0FBVSxXQUVOckMsRUFBT3NDLElBQUssU0FBVSxJQUV0QlIsRUFBUzNGLEtBQU0sU0FBVW9HLEdBQ3JCQyxFQUFldEcsRUFBR0csTUFBUWtHLEtBR2IsR0FBWmpCLEdBQ0RtQixPQU1QbkMsR0FDRG5CLFdBQVksV0FDUm1CLEdBQWMsR0FDZixNQUlYa0MsRUFBZ0IsU0FBVUUsRUFBTTFELEdBRTVCLEdBQUkyRCxHQUFRLEdBRVByQyxLQUNEcUMsRUFBUSxHQUdaeEQsV0FBWSxXQUNSdUQsRUFBS3pGLFlBQWEsUUFDbkIrQixFQUFRMkQsSUFHZlgsRUFBZSxXQUVYLEdBQUlZLEdBQVcsc0JBRWZ2QyxJQUFhLEVBRWJSLEVBQVNlLFNBQ0xpQyxhQUFjRCxFQUNkRSxpQkFBaUIsRUFDakJDLFNBQ0lDLFlBQWEsMkJBSWhCekMsR0FDRFYsRUFBU2UsU0FBV0MsT0FBUSxJQUFLZCxFQUFXYyxPQUFRLFdBQVlULEtBQU0sVUFHMUVqQixXQUFZLFdBQ1JjLEVBQVdoRCxZQUFhLFdBQ3pCLE1BR1B3RixFQUFpQixXQUVidkMsRUFBU29DLElBQUssVUFBVyxHQUV6Qm5ELFdBQVksV0FFUmUsRUFBU29DLElBQUssVUFBVyxHQUV6QnBDLEVBQVNnQyxTQUNMQyxPQUFRLElBRVJGLFNBQVUsSUFDVkksU0FBVSxXQUNObkMsRUFBUytDLGFBSWxCLE1BR1BsQyxFQUFnQixXQUVaLEdBQUltQyxHQUFRL0MsQ0FFWkYsR0FBV2pELFNBQVUsVUFFckJ3RCxFQUFTMkMsUUFDVDNDLEVBQVd0RSxFQUFFa0gsTUFDVEMsSUFBS0gsRUFDTDlDLE1BQ0lrRCxPQUFRLFVBQ1JDLEtBQU0vRyxFQUFLMkUsS0FBTSxxQkFDakJRLEtBQU01QixFQUFXSyxLQUFNLFNBRTNCb0QsU0FBVSxPQUNWQyxRQUFTLElBQ1Q5QixLQUFNLE1BQ04rQixRQUFTLFNBQVd4QyxHQUVoQmxCLEVBQU9tQyxPQUFRbkMsRUFBT21DLFVBRXRCbEIsRUFBb0JDLElBR3hCeUMsTUFBTyxTQUFXbEQsR0FDbUIsU0FBN0JBLEVBQWVtRCxZQUNmQyxNQUFPLGNBTXZCbkUsRUFBUSxXQUVKcUIsSUFDQXBFLElBSVIrQyxNQUlBc0IsRUFBYyxTQUFXekUsRUFBS3lDLEdBRTlCLEdBQUk4RSxHQUFRekgsS0FDUkcsRUFBT0QsRUFDUHFELEVBQVExRCxFQUFHLFFBQ1gyRCxFQUFXckQsRUFBS3VILFNBQ2hCQyxFQUFleEgsRUFBS3lILFFBQVMsa0JBQzdCQyxFQUFRaEksRUFBRyxRQUNYMkIsRUFBVTNCLEVBQUc0QixRQUNicUcsRUFBU3RFLEVBQVN2QyxLQUFNLDRCQUN4QjhHLEVBQVMsS0FDVEMsRUFBYyxLQUNkQyxFQUFjLEtBQ2RDLEVBQWlCLEtBQ2pCQyxFQUFtQixLQUNuQkMsRUFBb0IsS0FDcEJDLEVBQWlCLEtBQ2pCQyxFQUFpQixLQUNqQkMsRUFBVSxLQUVWQyxFQUFhLFdBRVRoSCxFQUFRakIsSUFFSjJDLE9BQVEsV0FFSnVGLE9BTVJULEVBQVlOLFNBQVNuSCxJQUVqQmtFLE1BQU8sV0FFSGlFLE9BTVJWLEVBQVl6SCxJQUVSa0UsTUFBTyxTQUFVa0UsR0FFYkEsRUFBTUMscUJBTWRYLEVBQVkxSCxJQUNSa0UsTUFBTyxXQUdILE1BREFpRSxNQUNPLE1BTW5CRyxFQUFtQixXQUVKbEIsRUFBYTdDLEtBQU0sbUJBRTlCaUQsR0FBU2xJLEVBQUcsbWVBZVpxSSxFQUFpQkgsRUFBTzlHLEtBQU0sbUJBQzlCa0gsRUFBbUJKLEVBQU85RyxLQUFNLHFCQUNoQ21ILEVBQW9CTCxFQUFPOUcsS0FBTSxzQkFDakNvSCxFQUFpQk4sRUFBTzlHLEtBQU0sdUJBQzlCcUgsRUFBaUJQLEVBQU85RyxLQUFNLHdCQUdsQzZILEVBQVksV0FFUixHQUFJQyxHQUFjaEIsRUFBTzlHLEtBQU0sd0JBQzNCK0gsRUFBTUQsRUFBWTlILEtBQU0sY0FBZThDLEtBQU0sT0FDN0NrRixFQUFlcEosRUFBRyxnQkFBa0JtSixFQUFNLCtDQUU5Q25KLEdBQUcsd0JBQXlCb0IsS0FBTSx3QkFBeUJpSSxRQUFTRCxJQUd4RUUsRUFBYyxXQUVWTixJQUNBTyxJQUNBQyxJQUNBZCxFQUFRN0YsUUFBU0MsRUFBTyxHQUN4Qm9GLEVBQU9wSCxTQUFVLFVBQ2pCMkksSUFDQWYsRUFBUWdCLFlBR1piLEVBQWMsV0FFVlgsRUFBT25ILFlBQWEsVUFDcEJrQyxXQUFZLFdBQ1IrRSxFQUFNNUIsS0FBS3VELFNBQVUsR0FBSUMsYUFBYyxLQUN2QzFCLEVBQU9uQixVQUNSLE1BR1B3QyxFQUFrQixXQUVkdkosRUFBRUMsS0FBTWdJLEVBQVEsV0FFWixHQUFJbUIsR0FBZSxLQUNmUyxFQUFVLEtBQ1ZDLEVBQVksSUFFWDlKLEdBQUdHLE1BQU9RLFNBQVUsOEJBRXJCbUosRUFBWSx3Q0FDWlYsRUFBZSxxQ0FDZlMsRUFBVSxhQUFlN0osRUFBRUcsTUFBTThFLEtBQU0sUUFBVyxNQUlsRDZFLEVBQVksR0FDWlYsRUFBZSxhQUFlcEosRUFBR0csTUFBTzhFLEtBQU0sT0FBVSxLQUN4RDRFLEVBQVUsR0FJZCxJQUFJRSxHQUFVL0osRUFBRyxzR0FFd0M2SixFQUFVLHdJQUl2Q0MsRUFBWSwrQ0FFWlYsRUFBZSxpRkFFbUJwSixFQUFHRyxNQUFPOEUsS0FBTSxTQUFZLGtHQU0xRm9ELEdBQWUxQyxPQUFRb0UsR0FFdkJBLEVBQVEzSSxLQUFNLE9BQVFWLElBQ2xCc0osS0FBTSxXQUNGaEssRUFBR0csTUFBTzhFLEtBQU0sYUFBYzlFLEtBQUs4SixPQUNuQ2pLLEVBQUdHLE1BQU84RSxLQUFNLGNBQWU5RSxLQUFLOEYsUUFDcENpRSxFQUFpQi9KLEtBQUs4SixNQUFPOUosS0FBSzhGLE9BQVFqRyxFQUFHRyxZQU16RHVELEVBQU1pQyxPQUFRdUMsR0FFZEMsRUFBY0QsRUFBTzlHLEtBQU0sd0JBQzNCZ0gsRUFBY0YsRUFBTzlHLEtBQU0seUJBRy9CK0ksRUFBa0IsV0FDZCxHQUFJQyxHQUFZQyxTQUFTQyxjQUFlLE9BQ3BDQyxFQUFpQixJQUlyQixPQUhBRixVQUFTRyxLQUFLQyxZQUFhTCxHQUMzQkcsRUFBaUJILEVBQVVNLFlBQWNOLEVBQVVPLFlBQ25ETixTQUFTRyxLQUFLSSxZQUFhUixHQUNwQkcsR0FFWGYsRUFBYyxXQUVWZCxFQUFVLEdBQUk1RyxRQUFRd0csR0FDbEJ1QyxXQUFZdEMsRUFDWmpHLFdBQVlrRyxFQUNaakcsV0FBWWtHLEVBQ1p2RyxjQUFlLEVBQ2Y0SSxxQkFBcUIsRUFDckIvSCxpQkFBa0IsV0FDZGdJLElBQ0svSyxFQUFHLHdCQUF5Qm9CLEtBQU0sY0FBZTRKLFFBQ2xEL0IsUUFNaEJ6RixFQUFRLFdBQ0o4RixJQUNBWCxJQUNBckksRUFBTSxHQUFJRCxJQUFNdUgsR0FFcEJtRCxFQUFlLFdBRVgsR0FBSXhGLEdBQVEyQyxFQUFPOUcsS0FBTSxpQkFDckI2SixFQUFhMUYsRUFBTW5FLEtBQU0sOEJBQzdCNkosR0FBV2xFLFVBR2ZtRCxFQUFrQixTQUFVZ0IsRUFBVUMsRUFBV0MsR0FFN0MsR0FBSUMsR0FBSSxDQUdKQSxHQURHbkQsRUFBTytCLFFBQVFpQixFQUFlaEQsRUFBT2pDLFNBQVNrRixFQUM3Q2pELEVBQU9qQyxTQUFTa0YsRUFFaEJqRCxFQUFPK0IsUUFBUWlCLEVBR2xCRyxHQUFLLEVBRU5ELEVBQUloRixLQUNBNkQsTUFBa0IsSUFBVGlCLEVBQ1RqRixPQUFvQixJQUFWa0YsSUFLZEMsRUFBSWhGLEtBQ0E2RCxNQUFTb0IsRUFBRUgsRUFBUyxJQUNwQmpGLE9BQVVvRixFQUFFRixFQUFVLE9BTWxDdkMsRUFBNEIsV0FFeEI1SSxFQUFFQyxLQUFNb0ksRUFBZWpILEtBQU0sT0FBUyxXQUVsQzhJLEVBQWlCbEssRUFBR0csTUFBTytELEtBQU0sU0FBV2xFLEVBQUdHLE1BQU8rRCxLQUFNLFVBQVlsRSxFQUFHRyxVQUtuRnNKLEVBQWEsV0FFVHpCLEVBQU01QixLQUNGdUQsU0FBVSxTQUNWQyxhQUFjTyxNQUsxQjNHIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAkKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcucGFydG5lcnMnICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgU2xpZGVycyAoICQoIHRoaXMgKSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLmNhdGFsb2cnICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgU2xpZGVycyAoICQoIHRoaXMgKSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcblxyXG4gICAgICAgICQuZWFjaCggJCggJy5zdWItbWVudScgKSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG5ldyBTbGlkZXJzICggJCggdGhpcyApICk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcubW9iaWxlLW1lbnUnICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgTWVudSAoICQoIHRoaXMgKSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiggb2JqICl7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9idG4gPSAkKCAnLm1vYmlsZS1tZW51LWJ0bicgKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2NvbnN0cnVjdG9yID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF9idG4ub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoICQoIHRoaXMpLmhhc0NsYXNzKCAnY2xvc2UnICkgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcGVuTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfb3Blbk1lbnUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX2J0bi5hZGRDbGFzcyggJ2Nsb3NlJyApO1xyXG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3Zpc2libGUnICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jbG9zZU1lbnUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX2J0bi5yZW1vdmVDbGFzcyggJ2Nsb3NlJyApO1xyXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3Zpc2libGUnICk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfY29uc3RydWN0b3IoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBTbGlkZXJzID0gZnVuY3Rpb24oIG9iaiApIHtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX29iaiA9IG9iaixcclxuICAgICAgICAgICAgX3BhcnRuZXJzU2xpZGVyID0gX29iai5maW5kKCAnLnBhcnRuZXJzX19zd2lwZXInICksXHJcbiAgICAgICAgICAgIF9zdWJNZW51U2xpZGVyID0gX29iai5maW5kKCAnLnN1Yi1tZW51X19zd2lwZXInICksXHJcbiAgICAgICAgICAgIF9jYXRhbG9nU2xpZGVyID0gX29iai5maW5kKCAnLmNhdGFsb2dfX3N3aXBlcicgKSxcclxuICAgICAgICAgICAgX3BhcnRuZXJzUHJldiA9IF9vYmouZmluZCggJy5wYXJ0bmVyc19fc3dpcGVyLXByZXYnICksXHJcbiAgICAgICAgICAgIF9jYXRhbG9nUHJldiA9IF9vYmouZmluZCggJy5jYXRhbG9nX19zd2lwZXItcHJldicgKSxcclxuICAgICAgICAgICAgX3BhcnRuZXJzTmV4dCA9IF9vYmouZmluZCggJy5wYXJ0bmVyc19fc3dpcGVyLW5leHQnICksXHJcbiAgICAgICAgICAgIF9jYXRhbG9nTmV4dCA9IF9vYmouZmluZCggJy5jYXRhbG9nX19zd2lwZXItbmV4dCcgKSxcclxuICAgICAgICAgICAgX3BhcnRuZXJzLFxyXG4gICAgICAgICAgICBfY2F0YWxvZyxcclxuICAgICAgICAgICAgX3N1Yk1lbnUsXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2luaXRTbGlkZXIgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfcGFydG5lcnMgPSBuZXcgU3dpcGVyICggX3BhcnRuZXJzU2xpZGVyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IDEwMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWVkOiA1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiAnc2xpZGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvb3BlZFNsaWRlczogMjAsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiA4MCxcclxuICAgICAgICAgICAgICAgICAgICBuZXh0QnV0dG9uOiBfcGFydG5lcnNOZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9wYXJ0bmVyc1ByZXZcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfY2F0YWxvZyA9IG5ldyBTd2lwZXIgKCBfY2F0YWxvZ1NsaWRlciwge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiAxMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogJ3NsaWRlJyxcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX2NhdGFsb2dOZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9jYXRhbG9nUHJldixcclxuICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA3Njc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgMTE5OToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9zdWJNZW51ID0gbmV3IFN3aXBlciAoIF9zdWJNZW51U2xpZGVyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWVkOiA1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiAnc2xpZGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgICAgICBvblNsaWRlQ2hhbmdlU3RhcnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnc3RhcnQnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zdWJNZW51U2xpZGVyWzBdLnN3aXBlci5zbGlkZVRvKCBfc3ViTWVudS5maW5kKCAnLmFjdGl2ZScgKS5pbmRleCgpICwgMjAwLCBmYWxzZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb25TbGlkZUNoYW5nZUVuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdlbmQnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBvblJlYWNoQmVnaW5uaW5nOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3N0YXJ0JyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnZW5kJyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnc3RhcnQnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sMzAwIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBvblJlYWNoRW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ2VuZCcgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3N0YXJ0JyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LDMwMCApXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29uRXZlbnQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cub3V0ZXJXaWR0aCgpIDw9IDc2NyAgKXtcclxuICAgICAgICAgICAgICAgICAgICBfaW5pdFNsaWRlciAoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3Jlc2l6ZSc6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfd2luZG93Lm91dGVyV2lkdGgoKSA+PSA3NjcgICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGVzdHJveVNsaWRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2luaXRTbGlkZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IClcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9kZXN0cm95U2xpZGVyID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3N1Yk1lbnVTbGlkZXJbIDAgXS5zd2lwZXIuZGVzdHJveSggZmFsc2UsIHRydWUgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgX2luaXRTbGlkZXIoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcbiAgICB9O1xyXG5cclxufSApKCk7IiwiKCBmdW5jdGlvbigpe1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcubWVkaWEtZ2FsbGVyeScgKSwgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIG5ldyBNZWRpYUdhbGxlcnkgKCAkKCB0aGlzICkgKVxyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgfSApO1xyXG5cclxuICAgIHZhciBNZWRpYUdhbGxlcnkgPSBmdW5jdGlvbiggb2JqICkge1xyXG5cclxuICAgICAgICB2YXIgX29iaiA9IG9iaixcclxuICAgICAgICAgICAgX2JvZHkgPSAkKCAnYm9keScgKSxcclxuICAgICAgICAgICAgX3dyYXBwZXIgPSBfb2JqLmZpbmQoICcubWVkaWEtZ2FsbGVyeV9fd3JhcCcgKSxcclxuICAgICAgICAgICAgX3N3aXRjaGVyID0gX29iai5maW5kKCAnLm1lZGlhLWdhbGxlcnlfX3N3aXRjaGVyJyApLFxyXG4gICAgICAgICAgICBfc3dpdGNoQnRuID0gX3N3aXRjaGVyLmZpbmQoICdidXR0b24nICksXHJcbiAgICAgICAgICAgIF9jb3ZlciA9IF9vYmouZmluZCggJy5tZWRpYS1nYWxsZXJ5X19jb3ZlcicgKSxcclxuICAgICAgICAgICAgX3ByZWxvYWRlciA9IF9vYmouZmluZCggJy5wcmVsb2FkZXInICksXHJcbiAgICAgICAgICAgIF9idG5Nb3JlID0gX29iai5maW5kKCAnLm1lZGlhLWdhbGxlcnlfX21vcmUnICksXHJcbiAgICAgICAgICAgIF9maWxlTGluayA9IF9ib2R5LmRhdGEoICdhY3Rpb24nICksXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcclxuICAgICAgICAgICAgX2lzR2FsbGVyeSA9IGZhbHNlLFxyXG4gICAgICAgICAgICBfZmlyc3RHcm91cCA9IHRydWUsXHJcbiAgICAgICAgICAgIF9maWx0ZXJGbGFnID0gZmFsc2UsXHJcbiAgICAgICAgICAgIF9yZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgICAgIHZhciBfb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3N3aXRjaEJ0bi5vbiggJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyQnRuID0gJCggdGhpcyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJUeXBlID0gY3VyQnRuLmRhdGEoICd0eXBlJyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfc3dpdGNoQnRuLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ckJ0bi5hZGRDbGFzcyggJ2FjdGl2ZScgKTtcclxuICAgICAgICAgICAgICAgICAgICBfd3JhcHBlci5pc290b3BlKCB7IGZpbHRlcjogJy4nKyBjdXJUeXBlIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2ZpbHRlckZsYWcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9idG5Nb3JlLm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9hZE5ld0l0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5vbiggJ2NsaWNrJywgJy5tZWRpYS1nYWxsZXJ5X19pdGVtJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFN3aXBlclBvcHVwKCAkKCB0aGlzICksICQoIHRoaXMgKS5pbmRleCgpICk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9hZGRHYWxsZXJ5Q29udGVudCA9IGZ1bmN0aW9uICggbXNnICkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX29iai5hdHRyKCAnZGF0YS1sb2FkZWQtZ3JvdXAnICkgIT09IDAgJiYgX2lzR2FsbGVyeSApe1xyXG4gICAgICAgICAgICAgICAgICAgIF9kZXN0cm95R2FsbGVyeSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBoYXNJdGVtcyA9IG1zZy5oYXNfaXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0SXRlbXMgPSBtc2cuaXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3QmxvY2s7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBnZXRJdGVtcywgZnVuY3Rpb24oICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3QmxvY2sgPSAkKCAnPGRpdiBjbGFzcz1cIm1lZGlhLWdhbGxlcnlfX2l0ZW0gbmV3ICcrIGN1ckl0ZW0udHlwZSArJ1wiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8aW1nIHNyYz1cIicrIGN1ckl0ZW0uZHVtbXkgKydcIiBhbHQ9XCInKyBjdXJJdGVtLnR5cGUgKydcIi8+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXBwZXIuYXBwZW5kKCBuZXdCbG9jayApO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3SXRlbXMgPSBfd3JhcHBlci5maW5kKCAnLm5ldycgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIF9oZWlnaHRBbmltYXRpb24oIGhhc0l0ZW1zLCBuZXdJdGVtcyApO1xyXG4gICAgICAgICAgICAgICAgfSwgNTUwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBfaW5pdEdhbGxlcnkoKTtcclxuICAgICAgICAgICAgICAgIH0sIDUwMCApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmouYXR0ciggJ2RhdGEtbG9hZGVkLWdyb3VwJywgK19vYmouYXR0ciggJ2RhdGEtbG9hZGVkLWdyb3VwJyApKzEgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9kZXN0cm95R2FsbGVyeSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF93cmFwcGVyLmlzb3RvcGUoICdkZXN0cm95JyApO1xyXG4gICAgICAgICAgICAgICAgX2lzR2FsbGVyeSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2hlaWdodEFuaW1hdGlvbiA9IGZ1bmN0aW9uKCBoYXNJdGVtcywgbmV3SXRlbXMgKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSA1MDA7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfZmlyc3RHcm91cCApe1xyXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gMVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9jb3Zlci5hbmltYXRlKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBfd3JhcHBlci5vdXRlckhlaWdodCgpXHJcbiAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NvdmVyLmNzcyggJ2hlaWdodCcsICcnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJdGVtcy5lYWNoKCBmdW5jdGlvbiggaSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3dOZXdJdGVtcyggJCggdGhpcyApLCBpICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaGFzSXRlbXMgPT0gMCApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlbW92ZUJ0bk1vcmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfZmlyc3RHcm91cCApe1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZmlyc3RHcm91cCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3Nob3dOZXdJdGVtcyA9IGZ1bmN0aW9uKCBpdGVtLCBpbmRleCApe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkZWxheSA9IDEwMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIF9maXJzdEdyb3VwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5ID0gMVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVtb3ZlQ2xhc3MoICduZXcnICk7XHJcbiAgICAgICAgICAgICAgICB9LCBpbmRleCAqIGRlbGF5ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdEdhbGxlcnkgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHdyYXBJdGVtID0gJy5tZWRpYS1nYWxsZXJ5X19pdGVtJztcclxuXHJcbiAgICAgICAgICAgICAgICBfaXNHYWxsZXJ5ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBfd3JhcHBlci5pc290b3BlKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiB3cmFwSXRlbSxcclxuICAgICAgICAgICAgICAgICAgICBwZXJjZW50UG9zaXRpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFzb25yeToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5XaWR0aDogJy5tZWRpYS1nYWxsZXJ5X19zaXplcidcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfZmlsdGVyRmxhZyApe1xyXG4gICAgICAgICAgICAgICAgICAgIF93cmFwcGVyLmlzb3RvcGUoIHsgZmlsdGVyOiAnLicrIF9zd2l0Y2hCdG4uZmlsdGVyKCAnLmFjdGl2ZScgKS5kYXRhKCAndHlwZScgKSB9ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9wcmVsb2FkZXIucmVtb3ZlQ2xhc3MoICdhY3RpdmUnICk7XHJcbiAgICAgICAgICAgICAgICB9LCAzMDAgKVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3JlbW92ZUJ0bk1vcmUgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF9idG5Nb3JlLmNzcyggJ29wYWNpdHknLCAwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2J0bk1vcmUuY3NzKCAncGFkZGluZycsIDAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2J0bk1vcmUuYW5pbWF0ZSgge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDBcclxuICAgICAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2J0bk1vcmUucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgMzAwICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfbG9hZE5ld0l0ZW1zID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCAgPSBfZmlsZUxpbms7XHJcblxyXG4gICAgICAgICAgICAgICAgX3ByZWxvYWRlci5hZGRDbGFzcyggJ2FjdGl2ZScgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcmVxdWVzdC5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QgPSAkLmFqYXgoIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IHBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdnYWxsYXJ5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogX29iai5hdHRyKCAnZGF0YS1sb2FkZWQtZ3JvdXAnICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IF9zd2l0Y2hCdG4uZGF0YSggJ3R5cGUnIClcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMjAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIG1zZyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb3Zlci5oZWlnaHQoIF9jb3Zlci5oZWlnaHQoKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZEdhbGxlcnlDb250ZW50KCBtc2cgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCBYTUxIdHRwUmVxdWVzdCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIFhNTEh0dHBSZXF1ZXN0LnN0YXR1c1RleHQgIT0gJ2Fib3J0JyApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCAnRXJyb3IhJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX2xvYWROZXdJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgdmFyIFN3aXBlclBvcHVwID0gZnVuY3Rpb24gKCBvYmosIGluZGV4ICkge1xyXG5cclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfYm9keSA9ICQoICdib2R5JyApLFxyXG4gICAgICAgICAgICBfd3JhcHBlciA9IF9vYmoucGFyZW50KCksXHJcbiAgICAgICAgICAgIF9nYWxsZXJ5V3JhcCA9IF9vYmoucGFyZW50cyggJy5tZWRpYS1nYWxsZXJ5JyApLFxyXG4gICAgICAgICAgICBfaHRtbCA9ICQoICdodG1sJyApLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXHJcbiAgICAgICAgICAgIF9saW5rcyA9IF93cmFwcGVyLmZpbmQoICcubWVkaWEtZ2FsbGVyeV9faXRlbSBpbWcnICksXHJcbiAgICAgICAgICAgIF9wb3B1cCA9IG51bGwsXHJcbiAgICAgICAgICAgIF9wb3B1cElubmVyID0gbnVsbCxcclxuICAgICAgICAgICAgX3BvcHVwQ2xvc2UgPSBudWxsLFxyXG4gICAgICAgICAgICBfc3dpcGVyV3JhcHBlciA9IG51bGwsXHJcbiAgICAgICAgICAgIF9zd2lwZXJDb250YWluZXIgPSBudWxsLFxyXG4gICAgICAgICAgICBfc3dpcGVyUGFnaW5hdGlvbiA9IG51bGwsXHJcbiAgICAgICAgICAgIF9zd2lwZXJCdG5OZXh0ID0gbnVsbCxcclxuICAgICAgICAgICAgX3N3aXBlckJ0blByZXYgPSBudWxsLFxyXG4gICAgICAgICAgICBfc3dpcGVyID0gbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3NldFBpY3R1cmVTaXplV2hlblJlc2l6ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BvcHVwSW5uZXIucGFyZW50KCkub24oe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZVBvcHVwKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXBJbm5lci5vbih7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BvcHVwQ2xvc2Uub24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlUG9wdXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2FkZGluZ1ZhcmlhYmxlcyA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBfZ2FsbGVyeVdyYXAuYXR0ciggJ2RhdGEtbG9hZGVkLXR5cGUnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BvcHVwID0gJCggJzxkaXYgY2xhc3M9XCJzd2lwZXItcG9wdXBcIj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLWNvbnRhaW5lclwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLXdyYXBwZXJcIj48L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN3aXBlci1wYWdpbmF0aW9uXCI+PC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzd2lwZXItYnV0dG9uLW5leHRcIj48L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN3aXBlci1idXR0b24tcHJldlwiPjwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+JyApO1xyXG4gICAgICAgICAgICAgICAgX3N3aXBlcldyYXBwZXIgPSBfcG9wdXAuZmluZCggJy5zd2lwZXItd3JhcHBlcicgKTtcclxuICAgICAgICAgICAgICAgIF9zd2lwZXJDb250YWluZXIgPSBfcG9wdXAuZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApO1xyXG4gICAgICAgICAgICAgICAgX3N3aXBlclBhZ2luYXRpb24gPSBfcG9wdXAuZmluZCggJy5zd2lwZXItcGFnaW5hdGlvbicgKTtcclxuICAgICAgICAgICAgICAgIF9zd2lwZXJCdG5OZXh0ID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLWJ1dHRvbi1uZXh0JyApO1xyXG4gICAgICAgICAgICAgICAgX3N3aXBlckJ0blByZXYgPSBfcG9wdXAuZmluZCggJy5zd2lwZXItYnV0dG9uLXByZXYnICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfYWRkVmlkZW8gPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVNsaWRlID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLXNsaWRlLWFjdGl2ZScgKSxcclxuICAgICAgICAgICAgICAgICAgICBzcmMgPSBhY3RpdmVTbGlkZS5maW5kKCAnW2RhdGEtc3JjXScgKS5kYXRhKCAnc3JjJyApLFxyXG4gICAgICAgICAgICAgICAgICAgIGlubmVyQ29udGVudCA9ICQoICc8aWZyYW1lIHNyYz1cIicgKyBzcmMgKyAnXCI+IGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nICk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCggJy5zd2lwZXItc2xpZGUtYWN0aXZlJyApLmZpbmQoICcuc3dpcGVyLXBvcHVwX192aWRlbycgKS5wcmVwZW5kKCBpbm5lckNvbnRlbnQgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9idWlsZFBvcHVwID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfYWRkaW5nVmFyaWFibGVzKCk7XHJcbiAgICAgICAgICAgICAgICBfY29udGVudEZpbGxpbmcoKTtcclxuICAgICAgICAgICAgICAgIF9pbml0U3dpcGVyKCk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyLnNsaWRlVG8oIGluZGV4LCAwICk7XHJcbiAgICAgICAgICAgICAgICBfcG9wdXAuYWRkQ2xhc3MoICdhY3RpdmUnICk7XHJcbiAgICAgICAgICAgICAgICBfc2V0U3R5bGVzKCk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyLm9uUmVzaXplKCk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY2xvc2VQb3B1cCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BvcHVwLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBfaHRtbC5jc3Moe292ZXJmbG93OiAnJywgcGFkZGluZ1JpZ2h0OiAnJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0sIDMwMCApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2NvbnRlbnRGaWxsaW5nID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIF9saW5rcywgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyQ29udGVudCA9IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTUkMgPSBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVsb2FkZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoICQoIHRoaXMgKS5oYXNDbGFzcyggJ21lZGlhLWdhbGxlcnlfX2l0ZW1fdmlkZW8nICkgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWxvYWRlciA9ICc8aSBjbGFzcz1cImZhIGZhLXNwaW5uZXIgZmEtc3BpblwiPjwvaT4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckNvbnRlbnQgPSAnPGRpdiBjbGFzcz1cInN3aXBlci1wb3B1cF9fdmlkZW9cIi8+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNSQyA9ICdkYXRhLXNyYz1cIicgKyAkKHRoaXMpLmF0dHIoIFwiaHJlZlwiICkgKyAnXCInO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlbG9hZGVyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQ29udGVudCA9ICc8aW1nIHNyYz1cIicgKyAkKCB0aGlzICkuYXR0ciggJ3NyYycgKSArICdcIj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU1JDID0gJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0l0ZW0gPSAkKCAnPGRpdiBjbGFzcz1cInN3aXBlci1zbGlkZVwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLXBvcHVwX19pbm5lclwiICcgKyBkYXRhU1JDICsgJz5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJzd2lwZXItcG9wdXBfX2Nsb3NlXCI+PC9hPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyArIHByZWxvYWRlciArICdcXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgKyBpbm5lckNvbnRlbnQgKyAnXFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN3aXBlci1zbGlkZV9fdGl0bGVcIj4nICsgJCggdGhpcyApLmF0dHIoICd0aXRsZScgKSArICc8L3NwYW4+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PicgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3N3aXBlcldyYXBwZXIuYXBwZW5kKCBuZXdJdGVtICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0l0ZW0uZmluZCggJ2ltZycgKS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCggdGhpcyApLmF0dHIoICdkYXRhLXdpZHRoJywgdGhpcy53aWR0aCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCggdGhpcyApLmF0dHIoICdkYXRhLWhlaWdodCcsIHRoaXMuaGVpZ2h0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0UGljdHVyZVNpemUoIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCAkKCB0aGlzICkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2JvZHkuYXBwZW5kKCBfcG9wdXAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXBJbm5lciA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1wb3B1cF9faW5uZXInICk7XHJcbiAgICAgICAgICAgICAgICBfcG9wdXBDbG9zZSA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1wb3B1cF9fY2xvc2UnICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfZ2V0U2Nyb2xsV2lkdGggPSBmdW5jdGlvbiAoKXtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbGJhcldpZHRoID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHNjcm9sbERpdiApO1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsYmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKCBzY3JvbGxEaXYgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXJXaWR0aDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXRTd2lwZXIgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF9zd2lwZXIgPSBuZXcgU3dpcGVyKCBfc3dpcGVyQ29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbjogX3N3aXBlclBhZ2luYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX3N3aXBlckJ0bk5leHQsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkJ1dHRvbjogX3N3aXBlckJ0blByZXYsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uQ2xpY2thYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uU2xpZGVDaGFuZ2VFbmQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZW1vdmVWaWRlbygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICQoICcuc3dpcGVyLXNsaWRlLWFjdGl2ZScgKS5maW5kKCAnW2RhdGEtc3JjXScgKS5sZW5ndGggKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRWaWRlbygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9idWlsZFBvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBfb2JqWyAwIF0ub2JqID0gX3NlbGY7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9yZW1vdmVWaWRlbyA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLXNsaWRlJyApLFxyXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvRnJhbWUgPSBpdGVtcy5maW5kKCAnLnN3aXBlci1wb3B1cF9fdmlkZW8gaWZyYW1lJyApO1xyXG4gICAgICAgICAgICAgICAgdmlkZW9GcmFtZS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zZXRQaWN0dXJlU2l6ZSA9IGZ1bmN0aW9uKCBwaWNXaWR0aCwgcGljSGVpZ2h0LCBwaWMgKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgayA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCAoIF9wb3B1cC53aWR0aCgpL3BpY1dpZHRoICkgPiAoIF9wb3B1cC5oZWlnaHQoKS9waWNIZWlnaHQgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBrID0gX3BvcHVwLmhlaWdodCgpL3BpY0hlaWdodCA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSBfcG9wdXAud2lkdGgoKS9waWNXaWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIGsgPj0gMSApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwaWMuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiBwaWNXaWR0aCowLjg1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImhlaWdodFwiOiBwaWNIZWlnaHQqMC44NVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBpYy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndpZHRoXCI6IGsqcGljV2lkdGgqMC44NSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogaypwaWNIZWlnaHQqMC44NVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zZXRQaWN0dXJlU2l6ZVdoZW5SZXNpemUgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICQuZWFjaCggX3N3aXBlcldyYXBwZXIuZmluZCggJ2ltZycgKSwgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfc2V0UGljdHVyZVNpemUoICQoIHRoaXMgKS5kYXRhKCAnd2lkdGgnICksICQoIHRoaXMgKS5kYXRhKCAnaGVpZ2h0JyApLCAkKCB0aGlzICkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0U3R5bGVzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfaHRtbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IF9nZXRTY3JvbGxXaWR0aCgpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcblxyXG4gICAgfTtcclxuXHJcbn0gKSgpO1xyXG4iXX0=

!function(){$(function(){$.each($(".partners"),function(){new n($(this))}),$.each($(".catalog"),function(){new n($(this))}),$.each($(".sub-menu"),function(){new n($(this))}),$.each($(".mobile-menu"),function(){new e($(this))})});var e=function(e){var n=e,i=$(".mobile-menu-btn"),t=function(){s()},s=function(){i.on("click",function(){$(this).hasClass("close")?a():o()})},o=function(){i.addClass("close"),n.addClass("visible")},a=function(){i.removeClass("close"),n.removeClass("visible")};t()},n=function(e){var n,i,t,s=e,o=s.find(".partners__swiper"),a=s.find(".sub-menu__swiper"),r=s.find(".catalog__swiper"),c=s.find(".partners__swiper-prev"),d=s.find(".catalog__swiper-prev"),u=s.find(".partners__swiper-next"),l=s.find(".catalog__swiper-next"),f=$(window),p=function(){n=new Swiper(o,{autoplay:1e4,speed:500,effect:"slide",slidesPerView:"auto",loop:!0,loopedSlides:20,spaceBetween:80,nextButton:u,prevButton:c}),i=new Swiper(r,{autoplay:1e4,speed:500,effect:"slide",slidesPerView:3,loop:!0,nextButton:l,prevButton:d,breakpoints:{767:{slidesPerView:1},1199:{slidesPerView:2}}}),t=new Swiper(a,{autoplay:!1,speed:500,effect:"slide",slidesPerView:"auto",onSlideChangeStart:function(){s.removeClass("start"),a[0].swiper.slideTo(t.find(".active").index(),200,!1)},onSlideChangeEnd:function(){s.removeClass("end")},onReachBeginning:function(){s.addClass("start"),s.removeClass("end"),setTimeout(function(){s.addClass("start")},300)},onReachEnd:function(){s.addClass("end"),setTimeout(function(){s.removeClass("start")},300)}})},w=function(){f.outerWidth()<=767&&p(),f.on({resize:function(){f.outerWidth()>=767?h():p()}})},h=function(){a[0].swiper.destroy(!1,!0)},v=function(){w(),p()};v()}}();
!function(){"use strict";$(function(){$.each($(".media-gallery"),function(){new i($(this))})});var i=function(i){var e=i,n=$("body"),a=e.find(".media-gallery__wrap"),o=e.find(".media-gallery__switcher"),s=o.find("button"),r=e.find(".media-gallery__cover"),d=e.find(".preloader"),c=e.find(".media-gallery__more"),l=n.data("action"),u=($(window),!1),p=!0,f=!1,h=new XMLHttpRequest,v=function(){s.on("click",function(){var i=$(this),t=i.data("type");return s.removeClass("active"),i.addClass("active"),a.isotope({filter:"."+t}),f=!0,!1}),c.on({click:function(){return C(),!1}}),e.on("click",".media-gallery__item",function(){return t($(this),$(this).index()),!1})},m=function(i){0!==e.attr("data-loaded-group")&&u&&w();var t,n=i.has_items,o=i.items;$.each(o,function(){var i=this;t=$('<div class="media-gallery__item new '+i.type+'"><img src="'+i.dummy+'" alt="'+i.type+'"/></div>'),a.append(t)});var s=a.find(".new");setTimeout(function(){g(n,s)},550),setTimeout(function(){y()},500),e.attr("data-loaded-group",+e.attr("data-loaded-group")+1)},w=function(){a.isotope("destroy"),u=!1},g=function(i,t){var e=500;p&&(e=1),r.animate({height:a.outerHeight()},{duration:e,complete:function(){r.css("height",""),t.each(function(i){_($(this),i)}),0==i&&b()}}),p&&setTimeout(function(){p=!1},500)},_=function(i,t){var e=100;p&&(e=1),setTimeout(function(){i.removeClass("new")},t*e)},y=function(){var i=".media-gallery__item";u=!0,a.isotope({itemSelector:i,percentPosition:!0,masonry:{columnWidth:".media-gallery__sizer"}}),f&&a.isotope({filter:"."+s.filter(".active").data("type")}),setTimeout(function(){d.removeClass("active")},300)},b=function(){c.css("opacity",0),setTimeout(function(){c.css("padding",0),c.animate({height:0},{duration:500,complete:function(){c.remove()}})},300)},C=function(){var i=l;d.addClass("active"),h.abort(),h=$.ajax({url:i,data:{loadedGroup:e.attr("data-loaded-group"),loadedType:s.data("type")},dataType:"json",timeout:2e4,type:"GET",success:function(i){r.height(r.height()),m(i)},error:function(i){"abort"!=i.statusText&&alert("Error!")}})},T=function(){C(),v()};T()},t=function(i,t){var e=this,n=i,a=$("body"),o=n.parent(),s=n.parents(".media-gallery"),r=$("html"),d=$(window),c=o.find(".media-gallery__item img"),l=null,u=null,p=null,f=null,h=null,v=null,m=null,w=null,g=null,_=function(){d.on({resize:function(){P()}}),u.parent().on({click:function(){T()}}),u.on({click:function(i){i.stopPropagation()}}),p.on({click:function(){return T(),!1}})},y=function(){s.attr("data-loaded-type");l=$('<div class="swiper-popup">                                    <div class="swiper-container">                                        <div class="swiper-wrapper"></div>                                        <div class="swiper-pagination"></div>                                        <div class="swiper-button-next"></div>                                        <div class="swiper-button-prev"></div>                                    </div>                                </div>'),f=l.find(".swiper-wrapper"),h=l.find(".swiper-container"),v=l.find(".swiper-pagination"),m=l.find(".swiper-button-next"),w=l.find(".swiper-button-prev")},b=function(){var i=l.find(".swiper-slide-active"),t=i.find("[data-src]").data("src"),e=$('<iframe src="'+t+'"> frameborder="0" allowfullscreen></iframe>');$(".swiper-slide-active").find(".swiper-popup__video").prepend(e)},C=function(){y(),k(),E(),g.slideTo(t,0),l.addClass("active"),S(),g.onResize()},T=function(){l.removeClass("active"),setTimeout(function(){r.css({overflow:"",paddingRight:""}),l.remove()},300)},k=function(){$.each(c,function(){var i=null,t=null,e=null;$(this).hasClass("media-gallery__item_video")?(e='<i class="fa fa-spinner fa-spin"></i>',i='<div class="swiper-popup__video"/>',t='data-src="'+$(this).attr("href")+'"'):(e="",i='<img src="'+$(this).attr("src")+'">',t="");var n=$('<div class="swiper-slide">                                        <div class="swiper-popup__inner" '+t+'>                                            <a href="#" class="swiper-popup__close"></a>                                            '+e+"                                            "+i+'                                            <span class="swiper-slide__title">'+$(this).attr("title")+"</span>                                        </div>                                    </div>");f.append(n),n.find("img").on({load:function(){$(this).attr("data-width",this.width),$(this).attr("data-height",this.height),z(this.width,this.height,$(this))}})}),a.append(l),u=l.find(".swiper-popup__inner"),p=l.find(".swiper-popup__close")},x=function(){var i=document.createElement("div"),t=null;return document.body.appendChild(i),t=i.offsetWidth-i.clientWidth,document.body.removeChild(i),t},E=function(){g=new Swiper(h,{pagination:v,nextButton:m,prevButton:w,slidesPerView:1,paginationClickable:!0,onSlideChangeEnd:function(){j(),$(".swiper-slide-active").find("[data-src]").length&&b()}})},R=function(){C(),_(),n[0].obj=e},j=function(){var i=l.find(".swiper-slide"),t=i.find(".swiper-popup__video iframe");t.remove()},z=function(i,t,e){var n=0;n=l.width()/i>l.height()/t?l.height()/t:l.width()/i,n>=1?e.css({width:.85*i,height:.85*t}):e.css({width:n*i*.85,height:n*t*.85})},P=function(){$.each(f.find("img"),function(){z($(this).data("width"),$(this).data("height"),$(this))})},S=function(){r.css({overflow:"hidden",paddingRight:x()})};R()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5pbmRleC5qcyIsImpxdWVyeS5tZWRpYS1nYWxsZXJ5LmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiU2xpZGVycyIsInRoaXMiLCJNZW51Iiwib2JqIiwiX29iaiIsIl9idG4iLCJfY29uc3RydWN0b3IiLCJfb25FdmVudHMiLCJvbiIsImhhc0NsYXNzIiwiX2Nsb3NlTWVudSIsIl9vcGVuTWVudSIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJfcGFydG5lcnMiLCJfY2F0YWxvZyIsIl9zdWJNZW51IiwiX3BhcnRuZXJzU2xpZGVyIiwiZmluZCIsIl9zdWJNZW51U2xpZGVyIiwiX2NhdGFsb2dTbGlkZXIiLCJfcGFydG5lcnNQcmV2IiwiX2NhdGFsb2dQcmV2IiwiX3BhcnRuZXJzTmV4dCIsIl9jYXRhbG9nTmV4dCIsIl93aW5kb3ciLCJ3aW5kb3ciLCJfaW5pdFNsaWRlciIsIlN3aXBlciIsImF1dG9wbGF5Iiwic3BlZWQiLCJlZmZlY3QiLCJzbGlkZXNQZXJWaWV3IiwibG9vcCIsImxvb3BlZFNsaWRlcyIsInNwYWNlQmV0d2VlbiIsIm5leHRCdXR0b24iLCJwcmV2QnV0dG9uIiwiYnJlYWtwb2ludHMiLCI3NjciLCIxMTk5Iiwib25TbGlkZUNoYW5nZVN0YXJ0Iiwic3dpcGVyIiwic2xpZGVUbyIsImluZGV4Iiwib25TbGlkZUNoYW5nZUVuZCIsIm9uUmVhY2hCZWdpbm5pbmciLCJzZXRUaW1lb3V0Iiwib25SZWFjaEVuZCIsIl9vbkV2ZW50Iiwib3V0ZXJXaWR0aCIsInJlc2l6ZSIsIl9kZXN0cm95U2xpZGVyIiwiZGVzdHJveSIsIl9pbml0IiwiTWVkaWFHYWxsZXJ5IiwiX2JvZHkiLCJfd3JhcHBlciIsIl9zd2l0Y2hlciIsIl9zd2l0Y2hCdG4iLCJfY292ZXIiLCJfcHJlbG9hZGVyIiwiX2J0bk1vcmUiLCJfZmlsZUxpbmsiLCJkYXRhIiwiX2lzR2FsbGVyeSIsIl9maXJzdEdyb3VwIiwiX2ZpbHRlckZsYWciLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiY3VyQnRuIiwiY3VyVHlwZSIsImlzb3RvcGUiLCJmaWx0ZXIiLCJjbGljayIsIl9sb2FkTmV3SXRlbXMiLCJTd2lwZXJQb3B1cCIsIl9hZGRHYWxsZXJ5Q29udGVudCIsIm1zZyIsImF0dHIiLCJfZGVzdHJveUdhbGxlcnkiLCJuZXdCbG9jayIsImhhc0l0ZW1zIiwiaGFzX2l0ZW1zIiwiZ2V0SXRlbXMiLCJpdGVtcyIsImN1ckl0ZW0iLCJ0eXBlIiwiZHVtbXkiLCJhcHBlbmQiLCJuZXdJdGVtcyIsIl9oZWlnaHRBbmltYXRpb24iLCJfaW5pdEdhbGxlcnkiLCJkdXJhdGlvbiIsImFuaW1hdGUiLCJoZWlnaHQiLCJvdXRlckhlaWdodCIsImNvbXBsZXRlIiwiY3NzIiwiaSIsIl9zaG93TmV3SXRlbXMiLCJfcmVtb3ZlQnRuTW9yZSIsIml0ZW0iLCJkZWxheSIsIndyYXBJdGVtIiwiaXRlbVNlbGVjdG9yIiwicGVyY2VudFBvc2l0aW9uIiwibWFzb25yeSIsImNvbHVtbldpZHRoIiwicmVtb3ZlIiwicGF0aCIsImFib3J0IiwiYWpheCIsInVybCIsImxvYWRlZEdyb3VwIiwibG9hZGVkVHlwZSIsImRhdGFUeXBlIiwidGltZW91dCIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1c1RleHQiLCJhbGVydCIsIl9zZWxmIiwicGFyZW50IiwiX2dhbGxlcnlXcmFwIiwicGFyZW50cyIsIl9odG1sIiwiX2xpbmtzIiwiX3BvcHVwIiwiX3BvcHVwSW5uZXIiLCJfcG9wdXBDbG9zZSIsIl9zd2lwZXJXcmFwcGVyIiwiX3N3aXBlckNvbnRhaW5lciIsIl9zd2lwZXJQYWdpbmF0aW9uIiwiX3N3aXBlckJ0bk5leHQiLCJfc3dpcGVyQnRuUHJldiIsIl9zd2lwZXIiLCJfYWRkRXZlbnRzIiwiX3NldFBpY3R1cmVTaXplV2hlblJlc2l6ZSIsIl9jbG9zZVBvcHVwIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJfYWRkaW5nVmFyaWFibGVzIiwiX2FkZFZpZGVvIiwiYWN0aXZlU2xpZGUiLCJzcmMiLCJpbm5lckNvbnRlbnQiLCJwcmVwZW5kIiwiX2J1aWxkUG9wdXAiLCJfY29udGVudEZpbGxpbmciLCJfaW5pdFN3aXBlciIsIl9zZXRTdHlsZXMiLCJvblJlc2l6ZSIsIm92ZXJmbG93IiwicGFkZGluZ1JpZ2h0IiwiZGF0YVNSQyIsInByZWxvYWRlciIsIm5ld0l0ZW0iLCJsb2FkIiwid2lkdGgiLCJfc2V0UGljdHVyZVNpemUiLCJfZ2V0U2Nyb2xsV2lkdGgiLCJzY3JvbGxEaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzY3JvbGxiYXJXaWR0aCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldFdpZHRoIiwiY2xpZW50V2lkdGgiLCJyZW1vdmVDaGlsZCIsInBhZ2luYXRpb24iLCJwYWdpbmF0aW9uQ2xpY2thYmxlIiwiX3JlbW92ZVZpZGVvIiwibGVuZ3RoIiwidmlkZW9GcmFtZSIsInBpY1dpZHRoIiwicGljSGVpZ2h0IiwicGljIiwiayJdLCJtYXBwaW5ncyI6IkNBQUEsV0FFSUEsRUFBRyxXQUVDQSxFQUFFQyxLQUFNRCxFQUFHLGFBQWUsV0FDdEIsR0FBSUUsR0FBVUYsRUFBR0csU0FHckJILEVBQUVDLEtBQU1ELEVBQUcsWUFBYyxXQUNyQixHQUFJRSxHQUFVRixFQUFHRyxTQUlyQkgsRUFBRUMsS0FBTUQsRUFBRyxhQUFlLFdBQ3RCLEdBQUlFLEdBQVVGLEVBQUdHLFNBR3JCSCxFQUFFQyxLQUFNRCxFQUFHLGdCQUFrQixXQUN6QixHQUFJSSxHQUFPSixFQUFHRyxVQUt0QixJQUFJQyxHQUFPLFNBQVVDLEdBR2pCLEdBQUlDLEdBQU9ELEVBQ1BFLEVBQU9QLEVBQUcsb0JBR1ZRLEVBQWUsV0FDWEMsS0FFSkEsRUFBWSxXQUVSRixFQUFLRyxHQUFJLFFBQVMsV0FFVFYsRUFBR0csTUFBTVEsU0FBVSxTQUNwQkMsSUFFQUMsT0FNWkEsRUFBWSxXQUNSTixFQUFLTyxTQUFVLFNBQ2ZSLEVBQUtRLFNBQVUsWUFFbkJGLEVBQWEsV0FDVEwsRUFBS1EsWUFBYSxT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ZWhELEVBQU9qQyxTQUFTa0YsRUFDN0NqRCxFQUFPakMsU0FBU2tGLEVBRWhCakQsRUFBTytCLFFBQVFpQixFQUdsQkcsR0FBSyxFQUVORCxFQUFJaEYsS0FDQTZELE1BQWtCLElBQVRpQixFQUNUakYsT0FBb0IsSUFBVmtGLElBS2RDLEVBQUloRixLQUNBNkQsTUFBU29CLEVBQUVILEVBQVMsSUFDcEJqRixPQUFVb0YsRUFBRUYsRUFBVSxPQU1sQ3ZDLEVBQTRCLFdBRXhCNUksRUFBRUMsS0FBTW9JLEVBQWVqSCxLQUFNLE9BQVMsV0FFbEM4SSxFQUFpQmxLLEVBQUdHLE1BQU8rRCxLQUFNLFNBQVdsRSxFQUFHRyxNQUFPK0QsS0FBTSxVQUFZbEUsRUFBR0csVUFLbkZzSixFQUFhLFdBRVR6QixFQUFNNUIsS0FDRnVELFNBQVUsU0FDVkMsYUFBY08sTUFLMUIzRyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJCggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLnBhcnRuZXJzJyApLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbmV3IFNsaWRlcnMgKCAkKCB0aGlzICkgKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICQuZWFjaCggJCggJy5jYXRhbG9nJyApLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbmV3IFNsaWRlcnMgKCAkKCB0aGlzICkgKTtcclxuICAgICAgICB9ICk7XHJcblxyXG5cclxuICAgICAgICAkLmVhY2goICQoICcuc3ViLW1lbnUnICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgU2xpZGVycyAoICQoIHRoaXMgKSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLm1vYmlsZS1tZW51JyApLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbmV3IE1lbnUgKCAkKCB0aGlzICkgKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgfSApO1xyXG5cclxuICAgIHZhciBNZW51ID0gZnVuY3Rpb24oIG9iaiApe1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfYnRuID0gJCggJy5tb2JpbGUtbWVudS1idG4nICk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfYnRuLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAkKCB0aGlzKS5oYXNDbGFzcyggJ2Nsb3NlJyApICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29wZW5NZW51ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9idG4uYWRkQ2xhc3MoICdjbG9zZScgKTtcclxuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICd2aXNpYmxlJyApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY2xvc2VNZW51ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9idG4ucmVtb3ZlQ2xhc3MoICdjbG9zZScgKTtcclxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICd2aXNpYmxlJyApO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgX2NvbnN0cnVjdG9yKCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgU2xpZGVycyA9IGZ1bmN0aW9uKCBvYmogKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9wYXJ0bmVyc1NsaWRlciA9IF9vYmouZmluZCggJy5wYXJ0bmVyc19fc3dpcGVyJyApLFxyXG4gICAgICAgICAgICBfc3ViTWVudVNsaWRlciA9IF9vYmouZmluZCggJy5zdWItbWVudV9fc3dpcGVyJyApLFxyXG4gICAgICAgICAgICBfY2F0YWxvZ1NsaWRlciA9IF9vYmouZmluZCggJy5jYXRhbG9nX19zd2lwZXInICksXHJcbiAgICAgICAgICAgIF9wYXJ0bmVyc1ByZXYgPSBfb2JqLmZpbmQoICcucGFydG5lcnNfX3N3aXBlci1wcmV2JyApLFxyXG4gICAgICAgICAgICBfY2F0YWxvZ1ByZXYgPSBfb2JqLmZpbmQoICcuY2F0YWxvZ19fc3dpcGVyLXByZXYnICksXHJcbiAgICAgICAgICAgIF9wYXJ0bmVyc05leHQgPSBfb2JqLmZpbmQoICcucGFydG5lcnNfX3N3aXBlci1uZXh0JyApLFxyXG4gICAgICAgICAgICBfY2F0YWxvZ05leHQgPSBfb2JqLmZpbmQoICcuY2F0YWxvZ19fc3dpcGVyLW5leHQnICksXHJcbiAgICAgICAgICAgIF9wYXJ0bmVycyxcclxuICAgICAgICAgICAgX2NhdGFsb2csXHJcbiAgICAgICAgICAgIF9zdWJNZW51LFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9pbml0U2xpZGVyID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BhcnRuZXJzID0gbmV3IFN3aXBlciAoIF9wYXJ0bmVyc1NsaWRlciwge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiAxMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogJ3NsaWRlJyxcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBsb29wZWRTbGlkZXM6IDIwLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogODAsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX3BhcnRuZXJzTmV4dCxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uOiBfcGFydG5lcnNQcmV2XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2NhdGFsb2cgPSBuZXcgU3dpcGVyICggX2NhdGFsb2dTbGlkZXIsIHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogMTAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDUwMCxcclxuICAgICAgICAgICAgICAgICAgICBlZmZlY3Q6ICdzbGlkZScsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5leHRCdXR0b246IF9jYXRhbG9nTmV4dCxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uOiBfY2F0YWxvZ1ByZXYsXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgNzY3OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDExOTk6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfc3ViTWVudSA9IG5ldyBTd2lwZXIgKCBfc3ViTWVudVNsaWRlciwge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogJ3NsaWRlJyxcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgb25TbGlkZUNoYW5nZVN0YXJ0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3N0YXJ0JyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfc3ViTWVudVNsaWRlclswXS5zd2lwZXIuc2xpZGVUbyggX3N1Yk1lbnUuZmluZCggJy5hY3RpdmUnICkuaW5kZXgoKSAsIDIwMCwgZmFsc2UgKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9uU2xpZGVDaGFuZ2VFbmQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnZW5kJyApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb25SZWFjaEJlZ2lubmluZzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdzdGFydCcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ2VuZCcgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3N0YXJ0JyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LDMwMCApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb25SZWFjaEVuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdlbmQnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdzdGFydCcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwzMDAgKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vbkV2ZW50ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfd2luZG93Lm91dGVyV2lkdGgoKSA8PSA3NjcgICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX2luaXRTbGlkZXIgKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgICdyZXNpemUnOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggX3dpbmRvdy5vdXRlcldpZHRoKCkgPj0gNzY3ICApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Rlc3Ryb3lTbGlkZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pbml0U2xpZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApXHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfZGVzdHJveVNsaWRlciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9zdWJNZW51U2xpZGVyWyAwIF0uc3dpcGVyLmRlc3Ryb3koIGZhbHNlLCB0cnVlICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgX29uRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIF9pbml0U2xpZGVyKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG4gICAgfTtcclxuXHJcbn0gKSgpOyIsIiggZnVuY3Rpb24oKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLm1lZGlhLWdhbGxlcnknICksIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICBuZXcgTWVkaWFHYWxsZXJ5ICggJCggdGhpcyApIClcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgIH0gKTtcclxuXHJcbiAgICB2YXIgTWVkaWFHYWxsZXJ5ID0gZnVuY3Rpb24oIG9iaiApIHtcclxuXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9ib2R5ID0gJCggJ2JvZHknICksXHJcbiAgICAgICAgICAgIF93cmFwcGVyID0gX29iai5maW5kKCAnLm1lZGlhLWdhbGxlcnlfX3dyYXAnICksXHJcbiAgICAgICAgICAgIF9zd2l0Y2hlciA9IF9vYmouZmluZCggJy5tZWRpYS1nYWxsZXJ5X19zd2l0Y2hlcicgKSxcclxuICAgICAgICAgICAgX3N3aXRjaEJ0biA9IF9zd2l0Y2hlci5maW5kKCAnYnV0dG9uJyApLFxyXG4gICAgICAgICAgICBfY292ZXIgPSBfb2JqLmZpbmQoICcubWVkaWEtZ2FsbGVyeV9fY292ZXInICksXHJcbiAgICAgICAgICAgIF9wcmVsb2FkZXIgPSBfb2JqLmZpbmQoICcucHJlbG9hZGVyJyApLFxyXG4gICAgICAgICAgICBfYnRuTW9yZSA9IF9vYmouZmluZCggJy5tZWRpYS1nYWxsZXJ5X19tb3JlJyApLFxyXG4gICAgICAgICAgICBfZmlsZUxpbmsgPSBfYm9keS5kYXRhKCAnYWN0aW9uJyApLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXHJcbiAgICAgICAgICAgIF9pc0dhbGxlcnkgPSBmYWxzZSxcclxuICAgICAgICAgICAgX2ZpcnN0R3JvdXAgPSB0cnVlLFxyXG4gICAgICAgICAgICBfZmlsdGVyRmxhZyA9IGZhbHNlLFxyXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgICB2YXIgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9zd2l0Y2hCdG4ub24oICdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckJ0biA9ICQoIHRoaXMgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVHlwZSA9IGN1ckJ0bi5kYXRhKCAndHlwZScgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3N3aXRjaEJ0bi5yZW1vdmVDbGFzcyggJ2FjdGl2ZScgKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJCdG4uYWRkQ2xhc3MoICdhY3RpdmUnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXBwZXIuaXNvdG9wZSggeyBmaWx0ZXI6ICcuJysgY3VyVHlwZSB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9maWx0ZXJGbGFnID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfYnRuTW9yZS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2xvYWROZXdJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoub24oICdjbGljaycsICcubWVkaWEtZ2FsbGVyeV9faXRlbScsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBTd2lwZXJQb3B1cCggJCggdGhpcyApLCAkKCB0aGlzICkuaW5kZXgoKSApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfYWRkR2FsbGVyeUNvbnRlbnQgPSBmdW5jdGlvbiAoIG1zZyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIF9vYmouYXR0ciggJ2RhdGEtbG9hZGVkLWdyb3VwJyApICE9PSAwICYmIF9pc0dhbGxlcnkgKXtcclxuICAgICAgICAgICAgICAgICAgICBfZGVzdHJveUdhbGxlcnkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaGFzSXRlbXMgPSBtc2cuaGFzX2l0ZW1zLFxyXG4gICAgICAgICAgICAgICAgICAgIGdldEl0ZW1zID0gbXNnLml0ZW1zLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0Jsb2NrO1xyXG5cclxuICAgICAgICAgICAgICAgICQuZWFjaCggZ2V0SXRlbXMsIGZ1bmN0aW9uKCApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0Jsb2NrID0gJCggJzxkaXYgY2xhc3M9XCJtZWRpYS1nYWxsZXJ5X19pdGVtIG5ldyAnKyBjdXJJdGVtLnR5cGUgKydcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGltZyBzcmM9XCInKyBjdXJJdGVtLmR1bW15ICsnXCIgYWx0PVwiJysgY3VySXRlbS50eXBlICsnXCIvPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF93cmFwcGVyLmFwcGVuZCggbmV3QmxvY2sgKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0l0ZW1zID0gX3dyYXBwZXIuZmluZCggJy5uZXcnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBfaGVpZ2h0QW5pbWF0aW9uKCBoYXNJdGVtcywgbmV3SXRlbXMgKTtcclxuICAgICAgICAgICAgICAgIH0sIDU1MCApO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgX2luaXRHYWxsZXJ5KCk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MDAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLmF0dHIoICdkYXRhLWxvYWRlZC1ncm91cCcsICtfb2JqLmF0dHIoICdkYXRhLWxvYWRlZC1ncm91cCcgKSsxICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfZGVzdHJveUdhbGxlcnkgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfd3JhcHBlci5pc290b3BlKCAnZGVzdHJveScgKTtcclxuICAgICAgICAgICAgICAgIF9pc0dhbGxlcnkgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9oZWlnaHRBbmltYXRpb24gPSBmdW5jdGlvbiggaGFzSXRlbXMsIG5ld0l0ZW1zICl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gNTAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX2ZpcnN0R3JvdXAgKXtcclxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IDFcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfY292ZXIuYW5pbWF0ZSgge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogX3dyYXBwZXIub3V0ZXJIZWlnaHQoKVxyXG4gICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jb3Zlci5jc3MoICdoZWlnaHQnLCAnJyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SXRlbXMuZWFjaCggZnVuY3Rpb24oIGkgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93TmV3SXRlbXMoICQoIHRoaXMgKSwgaSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGhhc0l0ZW1zID09IDAgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZW1vdmVCdG5Nb3JlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX2ZpcnN0R3JvdXAgKXtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2ZpcnN0R3JvdXAgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9LCA1MDAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zaG93TmV3SXRlbXMgPSBmdW5jdGlvbiggaXRlbSwgaW5kZXggKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGVsYXkgPSAxMDA7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfZmlyc3RHcm91cCApIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxheSA9IDFcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZUNsYXNzKCAnbmV3JyApO1xyXG4gICAgICAgICAgICAgICAgfSwgaW5kZXggKiBkZWxheSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXRHYWxsZXJ5ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB3cmFwSXRlbSA9ICcubWVkaWEtZ2FsbGVyeV9faXRlbSc7XHJcblxyXG4gICAgICAgICAgICAgICAgX2lzR2FsbGVyeSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dyYXBwZXIuaXNvdG9wZSgge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1TZWxlY3Rvcjogd3JhcEl0ZW0sXHJcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudFBvc2l0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hc29ucnk6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uV2lkdGg6ICcubWVkaWEtZ2FsbGVyeV9fc2l6ZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX2ZpbHRlckZsYWcgKXtcclxuICAgICAgICAgICAgICAgICAgICBfd3JhcHBlci5pc290b3BlKCB7IGZpbHRlcjogJy4nKyBfc3dpdGNoQnRuLmZpbHRlciggJy5hY3RpdmUnICkuZGF0YSggJ3R5cGUnICkgfSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfcHJlbG9hZGVyLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwIClcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9yZW1vdmVCdG5Nb3JlID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfYnRuTW9yZS5jc3MoICdvcGFjaXR5JywgMCApO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9idG5Nb3JlLmNzcyggJ3BhZGRpbmcnLCAwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9idG5Nb3JlLmFuaW1hdGUoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9idG5Nb3JlLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIH0sIDMwMCApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2xvYWROZXdJdGVtcyA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHBhdGggID0gX2ZpbGVMaW5rO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wcmVsb2FkZXIuYWRkQ2xhc3MoICdhY3RpdmUnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0ID0gJC5hamF4KCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBwYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkR3JvdXA6IF9vYmouYXR0ciggJ2RhdGEtbG9hZGVkLWdyb3VwJyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWRUeXBlOiBfc3dpdGNoQnRuLmRhdGEoICd0eXBlJyApXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDIwMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCBtc2cgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY292ZXIuaGVpZ2h0KCBfY292ZXIuaGVpZ2h0KCkgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRHYWxsZXJ5Q29udGVudCggbXNnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICggWE1MSHR0cFJlcXVlc3QgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9ICdhYm9ydCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCggJ0Vycm9yIScgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9sb2FkTmV3SXRlbXMoKTtcclxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBTd2lwZXJQb3B1cCA9IGZ1bmN0aW9uICggb2JqLCBpbmRleCApIHtcclxuXHJcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgX29iaiA9IG9iaixcclxuICAgICAgICAgICAgX2JvZHkgPSAkKCAnYm9keScgKSxcclxuICAgICAgICAgICAgX3dyYXBwZXIgPSBfb2JqLnBhcmVudCgpLFxyXG4gICAgICAgICAgICBfZ2FsbGVyeVdyYXAgPSBfb2JqLnBhcmVudHMoICcubWVkaWEtZ2FsbGVyeScgKSxcclxuICAgICAgICAgICAgX2h0bWwgPSAkKCAnaHRtbCcgKSxcclxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxyXG4gICAgICAgICAgICBfbGlua3MgPSBfd3JhcHBlci5maW5kKCAnLm1lZGlhLWdhbGxlcnlfX2l0ZW0gaW1nJyApLFxyXG4gICAgICAgICAgICBfcG9wdXAgPSBudWxsLFxyXG4gICAgICAgICAgICBfcG9wdXBJbm5lciA9IG51bGwsXHJcbiAgICAgICAgICAgIF9wb3B1cENsb3NlID0gbnVsbCxcclxuICAgICAgICAgICAgX3N3aXBlcldyYXBwZXIgPSBudWxsLFxyXG4gICAgICAgICAgICBfc3dpcGVyQ29udGFpbmVyID0gbnVsbCxcclxuICAgICAgICAgICAgX3N3aXBlclBhZ2luYXRpb24gPSBudWxsLFxyXG4gICAgICAgICAgICBfc3dpcGVyQnRuTmV4dCA9IG51bGwsXHJcbiAgICAgICAgICAgIF9zd2lwZXJCdG5QcmV2ID0gbnVsbCxcclxuICAgICAgICAgICAgX3N3aXBlciA9IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRQaWN0dXJlU2l6ZVdoZW5SZXNpemUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cElubmVyLnBhcmVudCgpLm9uKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VQb3B1cCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BvcHVwSW5uZXIub24oe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGV2ZW50ICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cENsb3NlLm9uKHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9hZGRpbmdWYXJpYWJsZXMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gX2dhbGxlcnlXcmFwLmF0dHIoICdkYXRhLWxvYWRlZC10eXBlJyApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cCA9ICQoICc8ZGl2IGNsYXNzPVwic3dpcGVyLXBvcHVwXCI+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN3aXBlci1jb250YWluZXJcIj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN3aXBlci13cmFwcGVyXCI+PC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzd2lwZXItcGFnaW5hdGlvblwiPjwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLWJ1dHRvbi1uZXh0XCI+PC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzd2lwZXItYnV0dG9uLXByZXZcIj48L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PicgKTtcclxuICAgICAgICAgICAgICAgIF9zd2lwZXJXcmFwcGVyID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLXdyYXBwZXInICk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyQ29udGFpbmVyID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLWNvbnRhaW5lcicgKTtcclxuICAgICAgICAgICAgICAgIF9zd2lwZXJQYWdpbmF0aW9uID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLXBhZ2luYXRpb24nICk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyQnRuTmV4dCA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1idXR0b24tbmV4dCcgKTtcclxuICAgICAgICAgICAgICAgIF9zd2lwZXJCdG5QcmV2ID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2FkZFZpZGVvID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhY3RpdmVTbGlkZSA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1zbGlkZS1hY3RpdmUnICksXHJcbiAgICAgICAgICAgICAgICAgICAgc3JjID0gYWN0aXZlU2xpZGUuZmluZCggJ1tkYXRhLXNyY10nICkuZGF0YSggJ3NyYycgKSxcclxuICAgICAgICAgICAgICAgICAgICBpbm5lckNvbnRlbnQgPSAkKCAnPGlmcmFtZSBzcmM9XCInICsgc3JjICsgJ1wiPiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JyApO1xyXG5cclxuICAgICAgICAgICAgICAgICQoICcuc3dpcGVyLXNsaWRlLWFjdGl2ZScgKS5maW5kKCAnLnN3aXBlci1wb3B1cF9fdmlkZW8nICkucHJlcGVuZCggaW5uZXJDb250ZW50ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfYnVpbGRQb3B1cCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgX2FkZGluZ1ZhcmlhYmxlcygpO1xyXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRGaWxsaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBfaW5pdFN3aXBlcigpO1xyXG4gICAgICAgICAgICAgICAgX3N3aXBlci5zbGlkZVRvKCBpbmRleCwgMCApO1xyXG4gICAgICAgICAgICAgICAgX3BvcHVwLmFkZENsYXNzKCAnYWN0aXZlJyApO1xyXG4gICAgICAgICAgICAgICAgX3NldFN0eWxlcygpO1xyXG4gICAgICAgICAgICAgICAgX3N3aXBlci5vblJlc2l6ZSgpO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2Nsb3NlUG9wdXAgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmVDbGFzcyggJ2FjdGl2ZScgKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgX2h0bWwuY3NzKHtvdmVyZmxvdzogJycsIHBhZGRpbmdSaWdodDogJyd9KTtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAzMDAgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jb250ZW50RmlsbGluZyA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBfbGlua3MsIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbm5lckNvbnRlbnQgPSBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU1JDID0gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlbG9hZGVyID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAkKCB0aGlzICkuaGFzQ2xhc3MoICdtZWRpYS1nYWxsZXJ5X19pdGVtX3ZpZGVvJyApICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVsb2FkZXIgPSAnPGkgY2xhc3M9XCJmYSBmYS1zcGlubmVyIGZhLXNwaW5cIj48L2k+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJDb250ZW50ID0gJzxkaXYgY2xhc3M9XCJzd2lwZXItcG9wdXBfX3ZpZGVvXCIvPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTUkMgPSAnZGF0YS1zcmM9XCInICsgJCh0aGlzKS5hdHRyKCBcImhyZWZcIiApICsgJ1wiJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWxvYWRlciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckNvbnRlbnQgPSAnPGltZyBzcmM9XCInICsgJCggdGhpcyApLmF0dHIoICdzcmMnICkgKyAnXCI+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNSQyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdJdGVtID0gJCggJzxkaXYgY2xhc3M9XCJzd2lwZXItc2xpZGVcIj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN3aXBlci1wb3B1cF9faW5uZXJcIiAnICsgZGF0YVNSQyArICc+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwic3dpcGVyLXBvcHVwX19jbG9zZVwiPjwvYT5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgKyBwcmVsb2FkZXIgKyAnXFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICsgaW5uZXJDb250ZW50ICsgJ1xcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzd2lwZXItc2xpZGVfX3RpdGxlXCI+JyArICQoIHRoaXMgKS5hdHRyKCAndGl0bGUnICkgKyAnPC9zcGFuPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4nICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9zd2lwZXJXcmFwcGVyLmFwcGVuZCggbmV3SXRlbSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdJdGVtLmZpbmQoICdpbWcnICkub24oIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIHRoaXMgKS5hdHRyKCAnZGF0YS13aWR0aCcsIHRoaXMud2lkdGggKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1oZWlnaHQnLCB0aGlzLmhlaWdodCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NldFBpY3R1cmVTaXplKCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgJCggdGhpcyApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9ib2R5LmFwcGVuZCggX3BvcHVwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BvcHVwSW5uZXIgPSBfcG9wdXAuZmluZCggJy5zd2lwZXItcG9wdXBfX2lubmVyJyApO1xyXG4gICAgICAgICAgICAgICAgX3BvcHVwQ2xvc2UgPSBfcG9wdXAuZmluZCggJy5zd2lwZXItcG9wdXBfX2Nsb3NlJyApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2dldFNjcm9sbFdpZHRoID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKSxcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxiYXJXaWR0aCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBzY3JvbGxEaXYgKTtcclxuICAgICAgICAgICAgICAgIHNjcm9sbGJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCggc2Nyb2xsRGl2ICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyV2lkdGg7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0U3dpcGVyID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyID0gbmV3IFN3aXBlciggX3N3aXBlckNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IF9zd2lwZXJQYWdpbmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIG5leHRCdXR0b246IF9zd2lwZXJCdG5OZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9zd2lwZXJCdG5QcmV2LFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbkNsaWNrYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBvblNsaWRlQ2hhbmdlRW5kOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmVtb3ZlVmlkZW8oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAkKCAnLnN3aXBlci1zbGlkZS1hY3RpdmUnICkuZmluZCggJ1tkYXRhLXNyY10nICkubGVuZ3RoICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWRkVmlkZW8oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfYnVpbGRQb3B1cCgpO1xyXG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfcmVtb3ZlVmlkZW8gPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1zbGlkZScgKSxcclxuICAgICAgICAgICAgICAgICAgICB2aWRlb0ZyYW1lID0gaXRlbXMuZmluZCggJy5zd2lwZXItcG9wdXBfX3ZpZGVvIGlmcmFtZScgKTtcclxuICAgICAgICAgICAgICAgIHZpZGVvRnJhbWUucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0UGljdHVyZVNpemUgPSBmdW5jdGlvbiggcGljV2lkdGgsIHBpY0hlaWdodCwgcGljICl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGsgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggKCBfcG9wdXAud2lkdGgoKS9waWNXaWR0aCApID4gKCBfcG9wdXAuaGVpZ2h0KCkvcGljSGVpZ2h0ICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IF9wb3B1cC5oZWlnaHQoKS9waWNIZWlnaHQgO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBrID0gX3BvcHVwLndpZHRoKCkvcGljV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBrID49IDEgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGljLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid2lkdGhcIjogcGljV2lkdGgqMC44NSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJoZWlnaHRcIjogcGljSGVpZ2h0KjAuODVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwaWMuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiBrKnBpY1dpZHRoKjAuODUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IGsqcGljSGVpZ2h0KjAuODVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0UGljdHVyZVNpemVXaGVuUmVzaXplID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIF9zd2lwZXJXcmFwcGVyLmZpbmQoICdpbWcnICksIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3NldFBpY3R1cmVTaXplKCAkKCB0aGlzICkuZGF0YSggJ3dpZHRoJyApLCAkKCB0aGlzICkuZGF0YSggJ2hlaWdodCcgKSwgJCggdGhpcyApICk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldFN0eWxlcyA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgX2h0bWwuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiBfZ2V0U2Nyb2xsV2lkdGgoKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG5cclxuICAgIH07XHJcblxyXG59ICkoKTtcclxuIl19

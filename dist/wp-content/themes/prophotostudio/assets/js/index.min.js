!function(){$(function(){$.each($(".partners"),function(){new n($(this))}),$.each($(".catalog"),function(){new n($(this))}),$.each($(".mobile-menu"),function(){new e($(this))})});var e=function(e){var n=e,i=$(".mobile-menu-btn"),t=function(){s()},s=function(){i.on("click",function(){$(this).hasClass("close")?a():o()})},o=function(){i.addClass("close"),n.addClass("visible")},a=function(){i.removeClass("close"),n.removeClass("visible")};t()},n=function(e){var n,i,t=e,s=t.find(".partners__swiper"),o=t.find(".catalog__swiper"),a=t.find(".partners__swiper-prev"),c=t.find(".catalog__swiper-prev"),l=t.find(".partners__swiper-next"),r=t.find(".catalog__swiper-next"),f=function(){n=new Swiper(s,{autoplay:1e4,speed:500,effect:"slide",slidesPerView:"auto",loop:!0,loopedSlides:20,spaceBetween:80,nextButton:l,prevButton:a}),i=new Swiper(o,{autoplay:1e4,speed:500,effect:"slide",slidesPerView:3,loop:!0,nextButton:r,prevButton:c})},p=function(){f()};p()}}();
!function(){"use strict";$(function(){$.each($(".media-gallery"),function(){new i($(this))})});var i=function(i){var e=i,n=$("body"),a=e.find(".media-gallery__wrap"),o=e.find(".media-gallery__switcher"),s=o.find("button"),r=e.find(".media-gallery__cover"),d=e.find(".preloader"),c=e.find(".media-gallery__more"),l=n.data("action"),u=($(window),!1),p=!0,f=!1,h=new XMLHttpRequest,v=function(){s.on("click",function(){var i=$(this),t=i.data("type");return s.removeClass("active"),i.addClass("active"),a.isotope({filter:"."+t}),f=!0,!1}),c.on({click:function(){return C(),!1}}),e.on("click",".media-gallery__item",function(){return t($(this),$(this).index()),!1})},m=function(i){0!==e.attr("data-loaded-group")&&u&&w();var t,n=i.has_items,o=i.items;$.each(o,function(){var i=this;t=$('<div class="media-gallery__item new '+i.type+'"><img src="'+i.dummy+'" alt="'+i.type+'"/></div>'),a.append(t)});var s=a.find(".new");setTimeout(function(){g(n,s)},550),setTimeout(function(){y()},500),e.attr("data-loaded-group",+e.attr("data-loaded-group")+1)},w=function(){a.isotope("destroy"),u=!1},g=function(i,t){var e=500;p&&(e=1),r.animate({height:a.outerHeight()},{duration:e,complete:function(){r.css("height",""),t.each(function(i){_($(this),i)}),0==i&&b()}}),p&&setTimeout(function(){p=!1},500)},_=function(i,t){var e=100;p&&(e=1),setTimeout(function(){i.removeClass("new")},t*e)},y=function(){var i=".media-gallery__item";u=!0,a.isotope({itemSelector:i,percentPosition:!0,masonry:{columnWidth:".media-gallery__sizer"}}),f&&a.isotope({filter:"."+s.filter(".active").data("type")}),setTimeout(function(){d.removeClass("active")},300)},b=function(){c.css("opacity",0),setTimeout(function(){c.css("padding",0),c.animate({height:0},{duration:500,complete:function(){c.remove()}})},300)},C=function(){var i=l;d.addClass("active"),h.abort(),h=$.ajax({url:i,data:{loadedGroup:e.attr("data-loaded-group"),loadedType:s.data("type")},dataType:"json",timeout:2e4,type:"GET",success:function(i){r.height(r.height()),m(i)},error:function(i){"abort"!=i.statusText&&alert("Error!")}})},T=function(){C(),v()};T()},t=function(i,t){var e=this,n=i,a=$("body"),o=n.parent(),s=n.parents(".media-gallery"),r=$("html"),d=$(window),c=o.find(".media-gallery__item img"),l=null,u=null,p=null,f=null,h=null,v=null,m=null,w=null,g=null,_=function(){d.on({resize:function(){P()}}),u.parent().on({click:function(){T()}}),u.on({click:function(i){i.stopPropagation()}}),p.on({click:function(){return T(),!1}})},y=function(){s.attr("data-loaded-type");l=$('<div class="swiper-popup">                                    <div class="swiper-container">                                        <div class="swiper-wrapper"></div>                                        <div class="swiper-pagination"></div>                                        <div class="swiper-button-next"></div>                                        <div class="swiper-button-prev"></div>                                    </div>                                </div>'),f=l.find(".swiper-wrapper"),h=l.find(".swiper-container"),v=l.find(".swiper-pagination"),m=l.find(".swiper-button-next"),w=l.find(".swiper-button-prev")},b=function(){var i=l.find(".swiper-slide-active"),t=i.find("[data-src]").data("src"),e=$('<iframe src="'+t+'"> frameborder="0" allowfullscreen></iframe>');$(".swiper-slide-active").find(".swiper-popup__video").prepend(e)},C=function(){y(),k(),E(),g.slideTo(t,0),l.addClass("active"),S(),g.onResize()},T=function(){l.removeClass("active"),setTimeout(function(){r.css({overflow:"",paddingRight:""}),l.remove()},300)},k=function(){$.each(c,function(){var i=null,t=null,e=null;$(this).hasClass("media-gallery__item_video")?(e='<i class="fa fa-spinner fa-spin"></i>',i='<div class="swiper-popup__video"/>',t='data-src="'+$(this).attr("href")+'"'):(e="",i='<img src="'+$(this).attr("src")+'">',t="");var n=$('<div class="swiper-slide">                                        <div class="swiper-popup__inner" '+t+'>                                            <a href="#" class="swiper-popup__close"></a>                                            '+e+"                                            "+i+'                                            <span class="swiper-slide__title">'+$(this).attr("title")+"</span>                                        </div>                                    </div>");f.append(n),n.find("img").on({load:function(){$(this).attr("data-width",this.width),$(this).attr("data-height",this.height),z(this.width,this.height,$(this))}})}),a.append(l),u=l.find(".swiper-popup__inner"),p=l.find(".swiper-popup__close")},x=function(){var i=document.createElement("div"),t=null;return document.body.appendChild(i),t=i.offsetWidth-i.clientWidth,document.body.removeChild(i),t},E=function(){g=new Swiper(h,{pagination:v,nextButton:m,prevButton:w,slidesPerView:1,paginationClickable:!0,onSlideChangeEnd:function(){j(),$(".swiper-slide-active").find("[data-src]").length&&b()}})},R=function(){C(),_(),n[0].obj=e},j=function(){var i=l.find(".swiper-slide"),t=i.find(".swiper-popup__video iframe");t.remove()},z=function(i,t,e){var n=0;n=l.width()/i>l.height()/t?l.height()/t:l.width()/i,n>=1?e.css({width:.85*i,height:.85*t}):e.css({width:n*i*.85,height:n*t*.85})},P=function(){$.each(f.find("img"),function(){z($(this).data("width"),$(this).data("height"),$(this))})},S=function(){r.css({overflow:"hidden",paddingRight:x()})};R()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5pbmRleC5qcyIsImpxdWVyeS5tZWRpYS1nYWxsZXJ5LmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiU2xpZGVycyIsInRoaXMiLCJNZW51Iiwib2JqIiwiX29iaiIsIl9idG4iLCJfY29uc3RydWN0b3IiLCJfb25FdmVudHMiLCJvbiIsImhhc0NsYXNzIiwiX2Nsb3NlTWVudSIsIl9vcGVuTWVudSIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJfcGFydG5lcnMiLCJfY2F0YWxvZyIsIl9wYXJ0bmVyc1NsaWRlciIsImZpbmQiLCJfY2F0YWxvZ1NsaWRlciIsIl9wYXJ0bmVyc1ByZXYiLCJfY2F0YWxvZ1ByZXYiLCJfcGFydG5lcnNOZXh0IiwiX2NhdGFsb2dOZXh0IiwiX2luaXRTbGlkZXIiLCJTd2lwZXIiLCJhdXRvcGxheSIsInNwZWVkIiwiZWZmZWN0Iiwic2xpZGVzUGVyVmlldyIsImxvb3AiLCJsb29wZWRTbGlkZXMiLCJzcGFjZUJldHdlZW4iLCJuZXh0QnV0dG9uIiwicHJldkJ1dHRvbiIsIl9pbml0IiwiTWVkaWFHYWxsZXJ5IiwiX2JvZHkiLCJfd3JhcHBlciIsIl9zd2l0Y2hlciIsIl9zd2l0Y2hCdG4iLCJfY292ZXIiLCJfcHJlbG9hZGVyIiwiX2J0bk1vcmUiLCJfZmlsZUxpbmsiLCJkYXRhIiwiX2lzR2FsbGVyeSIsIndpbmRvdyIsIl9maXJzdEdyb3VwIiwiX2ZpbHRlckZsYWciLCJfcmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiY3VyQnRuIiwiY3VyVHlwZSIsImlzb3RvcGUiLCJmaWx0ZXIiLCJjbGljayIsIl9sb2FkTmV3SXRlbXMiLCJTd2lwZXJQb3B1cCIsImluZGV4IiwiX2FkZEdhbGxlcnlDb250ZW50IiwibXNnIiwiYXR0ciIsIl9kZXN0cm95R2FsbGVyeSIsIm5ld0Jsb2NrIiwiaGFzSXRlbXMiLCJoYXNfaXRlbXMiLCJnZXRJdGVtcyIsIml0ZW1zIiwiY3VySXRlbSIsInR5cGUiLCJkdW1teSIsImFwcGVuZCIsIm5ld0l0ZW1zIiwic2V0VGltZW91dCIsIl9oZWlnaHRBbmltYXRpb24iLCJfaW5pdEdhbGxlcnkiLCJkdXJhdGlvbiIsImFuaW1hdGUiLCJoZWlnaHQiLCJvdXRlckhlaWdodCIsImNvbXBsZXRlIiwiY3NzIiwiaSIsIl9zaG93TmV3SXRlbXMiLCJfcmVtb3ZlQnRuTW9yZSIsIml0ZW0iLCJkZWxheSIsIndyYXBJdGVtIiwiaXRlbVNlbGVjdG9yIiwicGVyY2VudFBvc2l0aW9uIiwibWFzb25yeSIsImNvbHVtbldpZHRoIiwicmVtb3ZlIiwicGF0aCIsImFib3J0IiwiYWpheCIsInVybCIsImxvYWRlZEdyb3VwIiwibG9hZGVkVHlwZSIsImRhdGFUeXBlIiwidGltZW91dCIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1c1RleHQiLCJhbGVydCIsIl9zZWxmIiwicGFyZW50IiwiX2dhbGxlcnlXcmFwIiwicGFyZW50cyIsIl9odG1sIiwiX3dpbmRvdyIsIl9saW5rcyIsIl9wb3B1cCIsIl9wb3B1cElubmVyIiwiX3BvcHVwQ2xvc2UiLCJfc3dpcGVyV3JhcHBlciIsIl9zd2lwZXJDb250YWluZXIiLCJfc3dpcGVyUGFnaW5hdGlvbiIsIl9zd2lwZXJCdG5OZXh0IiwiX3N3aXBlckJ0blByZXYiLCJfc3dpcGVyIiwiX2FkZEV2ZW50cyIsInJlc2l6ZSIsIl9zZXRQaWN0dXJlU2l6ZVdoZW5SZXNpemUiLCJfY2xvc2VQb3B1cCIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiX2FkZGluZ1ZhcmlhYmxlcyIsIl9hZGRWaWRlbyIsImFjdGl2ZVNsaWRlIiwic3JjIiwiaW5uZXJDb250ZW50IiwicHJlcGVuZCIsIl9idWlsZFBvcHVwIiwiX2NvbnRlbnRGaWxsaW5nIiwiX2luaXRTd2lwZXIiLCJzbGlkZVRvIiwiX3NldFN0eWxlcyIsIm9uUmVzaXplIiwib3ZlcmZsb3ciLCJwYWRkaW5nUmlnaHQiLCJkYXRhU1JDIiwicHJlbG9hZGVyIiwibmV3SXRlbSIsImxvYWQiLCJ3aWR0aCIsIl9zZXRQaWN0dXJlU2l6ZSIsIl9nZXRTY3JvbGxXaWR0aCIsInNjcm9sbERpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNjcm9sbGJhcldpZHRoIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwicGFnaW5hdGlvbiIsInBhZ2luYXRpb25DbGlja2FibGUiLCJvblNsaWRlQ2hhbmdlRW5kIiwiX3JlbW92ZVZpZGVvIiwibGVuZ3RoIiwidmlkZW9GcmFtZSIsInBpY1dpZHRoIiwicGljSGVpZ2h0IiwicGljIiwiayJdLCJtYXBwaW5ncyI6IkNBQUEsV0FFSUEsRUFBRyxXQUVDQSxFQUFFQyxLQUFNRCxFQUFHLGFBQWUsV0FDdEIsR0FBSUUsR0FBVUYsRUFBR0csU0FHckJILEVBQUVDLEtBQU1ELEVBQUcsWUFBYyxXQUNyQixHQUFJRSxHQUFVRixFQUFHRyxTQUdyQkgsRUFBRUMsS0FBTUQsRUFBRyxnQkFBa0IsV0FDekIsR0FBSUksR0FBT0osRUFBR0csVUFLdEIsSUFBSUMsR0FBTyxTQUFVQyxHQUdqQixHQUFJQyxHQUFPRCxFQUNQRSxFQUFPUCxFQUFHLG9CQUdWUSxFQUFlLFdBQ1hDLEtBRUpBLEVBQVksV0FFUkYsRUFBS0csR0FBSSxRQUFTLFdBRVRWLEVBQUdHLE1BQU1RLFNBQVUsU0FDcEJDLElBRUFDLE9BTVpBLEVBQVksV0FDUk4sRUFBS08sU0FBVSxTQUNmUixFQUFLUSxTQUFVLFlBRW5CRixFQUFhLFdBQ1RMLEVBQUtRLFlBQWEsU0FDbEJULEVBQUtTLFlBQWEsV0FPMUJQLE1BSUFOLEVBQVUsU0FBVUcsR0FHcEIsR0FPSVcsR0FDQUMsRUFSQVgsRUFBT0QsRUFDUGEsRUFBa0JaLEVBQUthLEtBQU0scUJBQzdCQyxFQUFpQmQsRUFBS2EsS0FBTSxvQkFDNUJFLEVBQWdCZixFQUFLYSxLQUFNLDBCQUMzQkcsRUFBZWhCLEVBQUthLEtBQU0seUJBQzFCSSxFQUFnQmpCLEVBQUthLEtBQU0sMEJBQzNCSyxFQUFlbEIsRUFBS2Es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R2ZzRCxFQUFrQixTQUFVaUIsRUFBVUMsRUFBV0MsR0FFN0MsR0FBSUMsR0FBSSxDQUdKQSxHQURHdEQsRUFBT2lDLFFBQVFrQixFQUFlbkQsRUFBT2xDLFNBQVNzRixFQUM3Q3BELEVBQU9sQyxTQUFTc0YsRUFFaEJwRCxFQUFPaUMsUUFBUWtCLEVBR2xCRyxHQUFLLEVBRU5ELEVBQUlwRixLQUNBZ0UsTUFBa0IsSUFBVGtCLEVBQ1RyRixPQUFvQixJQUFWc0YsSUFLZEMsRUFBSXBGLEtBQ0FnRSxNQUFTcUIsRUFBRUgsRUFBUyxJQUNwQnJGLE9BQVV3RixFQUFFRixFQUFVLE9BTWxDekMsRUFBNEIsV0FFeEI3SCxFQUFFQyxLQUFNb0gsRUFBZWxHLEtBQU0sT0FBUyxXQUVsQ2lJLEVBQWlCcEosRUFBR0csTUFBTzJDLEtBQU0sU0FBVzlDLEVBQUdHLE1BQU8yQyxLQUFNLFVBQVk5QyxFQUFHRyxVQUtuRndJLEVBQWEsV0FFVDVCLEVBQU01QixLQUNGMEQsU0FBVSxTQUNWQyxhQUFjTyxNQUsxQmpIIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAkKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcucGFydG5lcnMnICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgU2xpZGVycyAoICQoIHRoaXMgKSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLmNhdGFsb2cnICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgU2xpZGVycyAoICQoIHRoaXMgKSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLm1vYmlsZS1tZW51JyApLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbmV3IE1lbnUgKCAkKCB0aGlzICkgKTtcclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgfSApO1xyXG5cclxuICAgIHZhciBNZW51ID0gZnVuY3Rpb24oIG9iaiApe1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfYnRuID0gJCggJy5tb2JpbGUtbWVudS1idG4nICk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfYnRuLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAkKCB0aGlzKS5oYXNDbGFzcyggJ2Nsb3NlJyApICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29wZW5NZW51ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9idG4uYWRkQ2xhc3MoICdjbG9zZScgKTtcclxuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICd2aXNpYmxlJyApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY2xvc2VNZW51ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9idG4ucmVtb3ZlQ2xhc3MoICdjbG9zZScgKTtcclxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICd2aXNpYmxlJyApO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgX2NvbnN0cnVjdG9yKCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgU2xpZGVycyA9IGZ1bmN0aW9uKCBvYmogKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9wYXJ0bmVyc1NsaWRlciA9IF9vYmouZmluZCggJy5wYXJ0bmVyc19fc3dpcGVyJyApLFxyXG4gICAgICAgICAgICBfY2F0YWxvZ1NsaWRlciA9IF9vYmouZmluZCggJy5jYXRhbG9nX19zd2lwZXInICksXHJcbiAgICAgICAgICAgIF9wYXJ0bmVyc1ByZXYgPSBfb2JqLmZpbmQoICcucGFydG5lcnNfX3N3aXBlci1wcmV2JyApLFxyXG4gICAgICAgICAgICBfY2F0YWxvZ1ByZXYgPSBfb2JqLmZpbmQoICcuY2F0YWxvZ19fc3dpcGVyLXByZXYnICksXHJcbiAgICAgICAgICAgIF9wYXJ0bmVyc05leHQgPSBfb2JqLmZpbmQoICcucGFydG5lcnNfX3N3aXBlci1uZXh0JyApLFxyXG4gICAgICAgICAgICBfY2F0YWxvZ05leHQgPSBfb2JqLmZpbmQoICcuY2F0YWxvZ19fc3dpcGVyLW5leHQnICksXHJcbiAgICAgICAgICAgIF9wYXJ0bmVycyxcclxuICAgICAgICAgICAgX2NhdGFsb2c7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9pbml0U2xpZGVyID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BhcnRuZXJzID0gbmV3IFN3aXBlciAoIF9wYXJ0bmVyc1NsaWRlciwge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiAxMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogJ3NsaWRlJyxcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBsb29wZWRTbGlkZXM6IDIwLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogODAsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX3BhcnRuZXJzTmV4dCxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uOiBfcGFydG5lcnNQcmV2XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2NhdGFsb2cgPSBuZXcgU3dpcGVyICggX2NhdGFsb2dTbGlkZXIsIHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogMTAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDUwMCxcclxuICAgICAgICAgICAgICAgICAgICBlZmZlY3Q6ICdzbGlkZScsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5leHRCdXR0b246IF9jYXRhbG9nTmV4dCxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uOiBfY2F0YWxvZ1ByZXZcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBfaW5pdFNsaWRlcigpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcblxyXG59ICkoKTsiLCIoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICQuZWFjaCggJCggJy5tZWRpYS1nYWxsZXJ5JyApLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgbmV3IE1lZGlhR2FsbGVyeSAoICQoIHRoaXMgKSApXHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdmFyIE1lZGlhR2FsbGVyeSA9IGZ1bmN0aW9uKCBvYmogKSB7XHJcblxyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfYm9keSA9ICQoICdib2R5JyApLFxyXG4gICAgICAgICAgICBfd3JhcHBlciA9IF9vYmouZmluZCggJy5tZWRpYS1nYWxsZXJ5X193cmFwJyApLFxyXG4gICAgICAgICAgICBfc3dpdGNoZXIgPSBfb2JqLmZpbmQoICcubWVkaWEtZ2FsbGVyeV9fc3dpdGNoZXInICksXHJcbiAgICAgICAgICAgIF9zd2l0Y2hCdG4gPSBfc3dpdGNoZXIuZmluZCggJ2J1dHRvbicgKSxcclxuICAgICAgICAgICAgX2NvdmVyID0gX29iai5maW5kKCAnLm1lZGlhLWdhbGxlcnlfX2NvdmVyJyApLFxyXG4gICAgICAgICAgICBfcHJlbG9hZGVyID0gX29iai5maW5kKCAnLnByZWxvYWRlcicgKSxcclxuICAgICAgICAgICAgX2J0bk1vcmUgPSBfb2JqLmZpbmQoICcubWVkaWEtZ2FsbGVyeV9fbW9yZScgKSxcclxuICAgICAgICAgICAgX2ZpbGVMaW5rID0gX2JvZHkuZGF0YSggJ2FjdGlvbicgKSxcclxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxyXG4gICAgICAgICAgICBfaXNHYWxsZXJ5ID0gZmFsc2UsXHJcbiAgICAgICAgICAgIF9maXJzdEdyb3VwID0gdHJ1ZSxcclxuICAgICAgICAgICAgX2ZpbHRlckZsYWcgPSBmYWxzZSxcclxuICAgICAgICAgICAgX3JlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgICAgICAgdmFyIF9vbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfc3dpdGNoQnRuLm9uKCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJCdG4gPSAkKCB0aGlzICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clR5cGUgPSBjdXJCdG4uZGF0YSggJ3R5cGUnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9zd2l0Y2hCdG4ucmVtb3ZlQ2xhc3MoICdhY3RpdmUnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyQnRuLmFkZENsYXNzKCAnYWN0aXZlJyApO1xyXG4gICAgICAgICAgICAgICAgICAgIF93cmFwcGVyLmlzb3RvcGUoIHsgZmlsdGVyOiAnLicrIGN1clR5cGUgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfZmlsdGVyRmxhZyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2J0bk1vcmUub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2FkTmV3SXRlbXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCAnY2xpY2snLCAnLm1lZGlhLWdhbGxlcnlfX2l0ZW0nLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgU3dpcGVyUG9wdXAoICQoIHRoaXMgKSwgJCggdGhpcyApLmluZGV4KCkgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2FkZEdhbGxlcnlDb250ZW50ID0gZnVuY3Rpb24gKCBtc2cgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfb2JqLmF0dHIoICdkYXRhLWxvYWRlZC1ncm91cCcgKSAhPT0gMCAmJiBfaXNHYWxsZXJ5ICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Rlc3Ryb3lHYWxsZXJ5KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGhhc0l0ZW1zID0gbXNnLmhhc19pdGVtcyxcclxuICAgICAgICAgICAgICAgICAgICBnZXRJdGVtcyA9IG1zZy5pdGVtcyxcclxuICAgICAgICAgICAgICAgICAgICBuZXdCbG9jaztcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIGdldEl0ZW1zLCBmdW5jdGlvbiggKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdCbG9jayA9ICQoICc8ZGl2IGNsYXNzPVwibWVkaWEtZ2FsbGVyeV9faXRlbSBuZXcgJysgY3VySXRlbS50eXBlICsnXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxpbWcgc3JjPVwiJysgY3VySXRlbS5kdW1teSArJ1wiIGFsdD1cIicrIGN1ckl0ZW0udHlwZSArJ1wiLz4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfd3JhcHBlci5hcHBlbmQoIG5ld0Jsb2NrICk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBuZXdJdGVtcyA9IF93cmFwcGVyLmZpbmQoICcubmV3JyApO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgX2hlaWdodEFuaW1hdGlvbiggaGFzSXRlbXMsIG5ld0l0ZW1zICk7XHJcbiAgICAgICAgICAgICAgICB9LCA1NTAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIF9pbml0R2FsbGVyeSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgNTAwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5hdHRyKCAnZGF0YS1sb2FkZWQtZ3JvdXAnLCArX29iai5hdHRyKCAnZGF0YS1sb2FkZWQtZ3JvdXAnICkrMSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2Rlc3Ryb3lHYWxsZXJ5ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dyYXBwZXIuaXNvdG9wZSggJ2Rlc3Ryb3knICk7XHJcbiAgICAgICAgICAgICAgICBfaXNHYWxsZXJ5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaGVpZ2h0QW5pbWF0aW9uID0gZnVuY3Rpb24oIGhhc0l0ZW1zLCBuZXdJdGVtcyApe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IDUwMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIF9maXJzdEdyb3VwICl7XHJcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24gPSAxXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX2NvdmVyLmFuaW1hdGUoIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IF93cmFwcGVyLm91dGVySGVpZ2h0KClcclxuICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY292ZXIuY3NzKCAnaGVpZ2h0JywgJycgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0l0ZW1zLmVhY2goIGZ1bmN0aW9uKCBpICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvd05ld0l0ZW1zKCAkKCB0aGlzICksIGkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBoYXNJdGVtcyA9PSAwICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVtb3ZlQnRuTW9yZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIF9maXJzdEdyb3VwICl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9maXJzdEdyb3VwID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2hvd05ld0l0ZW1zID0gZnVuY3Rpb24oIGl0ZW0sIGluZGV4ICl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRlbGF5ID0gMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX2ZpcnN0R3JvdXAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsYXkgPSAxXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5yZW1vdmVDbGFzcyggJ25ldycgKTtcclxuICAgICAgICAgICAgICAgIH0sIGluZGV4ICogZGVsYXkgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0R2FsbGVyeSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgd3JhcEl0ZW0gPSAnLm1lZGlhLWdhbGxlcnlfX2l0ZW0nO1xyXG5cclxuICAgICAgICAgICAgICAgIF9pc0dhbGxlcnkgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIF93cmFwcGVyLmlzb3RvcGUoIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtU2VsZWN0b3I6IHdyYXBJdGVtLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnRQb3NpdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBtYXNvbnJ5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbldpZHRoOiAnLm1lZGlhLWdhbGxlcnlfX3NpemVyJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIF9maWx0ZXJGbGFnICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXBwZXIuaXNvdG9wZSggeyBmaWx0ZXI6ICcuJysgX3N3aXRjaEJ0bi5maWx0ZXIoICcuYWN0aXZlJyApLmRhdGEoICd0eXBlJyApIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3ByZWxvYWRlci5yZW1vdmVDbGFzcyggJ2FjdGl2ZScgKTtcclxuICAgICAgICAgICAgICAgIH0sIDMwMCApXHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfcmVtb3ZlQnRuTW9yZSA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgX2J0bk1vcmUuY3NzKCAnb3BhY2l0eScsIDAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfYnRuTW9yZS5jc3MoICdwYWRkaW5nJywgMCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfYnRuTW9yZS5hbmltYXRlKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYnRuTW9yZS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCAzMDAgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9sb2FkTmV3SXRlbXMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwYXRoICA9IF9maWxlTGluaztcclxuXHJcbiAgICAgICAgICAgICAgICBfcHJlbG9hZGVyLmFkZENsYXNzKCAnYWN0aXZlJyApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogcGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZEdyb3VwOiBfb2JqLmF0dHIoICdkYXRhLWxvYWRlZC1ncm91cCcgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkVHlwZTogX3N3aXRjaEJ0bi5kYXRhKCAndHlwZScgKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAyMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICggbXNnICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NvdmVyLmhlaWdodCggX2NvdmVyLmhlaWdodCgpICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWRkR2FsbGVyeUNvbnRlbnQoIG1zZyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoIFhNTEh0dHBSZXF1ZXN0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggWE1MSHR0cFJlcXVlc3Quc3RhdHVzVGV4dCAhPSAnYWJvcnQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoICdFcnJvciEnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfbG9hZE5ld0l0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgU3dpcGVyUG9wdXAgPSBmdW5jdGlvbiAoIG9iaiwgaW5kZXggKSB7XHJcblxyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9ib2R5ID0gJCggJ2JvZHknICksXHJcbiAgICAgICAgICAgIF93cmFwcGVyID0gX29iai5wYXJlbnQoKSxcclxuICAgICAgICAgICAgX2dhbGxlcnlXcmFwID0gX29iai5wYXJlbnRzKCAnLm1lZGlhLWdhbGxlcnknICksXHJcbiAgICAgICAgICAgIF9odG1sID0gJCggJ2h0bWwnICksXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcclxuICAgICAgICAgICAgX2xpbmtzID0gX3dyYXBwZXIuZmluZCggJy5tZWRpYS1nYWxsZXJ5X19pdGVtIGltZycgKSxcclxuICAgICAgICAgICAgX3BvcHVwID0gbnVsbCxcclxuICAgICAgICAgICAgX3BvcHVwSW5uZXIgPSBudWxsLFxyXG4gICAgICAgICAgICBfcG9wdXBDbG9zZSA9IG51bGwsXHJcbiAgICAgICAgICAgIF9zd2lwZXJXcmFwcGVyID0gbnVsbCxcclxuICAgICAgICAgICAgX3N3aXBlckNvbnRhaW5lciA9IG51bGwsXHJcbiAgICAgICAgICAgIF9zd2lwZXJQYWdpbmF0aW9uID0gbnVsbCxcclxuICAgICAgICAgICAgX3N3aXBlckJ0bk5leHQgPSBudWxsLFxyXG4gICAgICAgICAgICBfc3dpcGVyQnRuUHJldiA9IG51bGwsXHJcbiAgICAgICAgICAgIF9zd2lwZXIgPSBudWxsO1xyXG5cclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbih7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0UGljdHVyZVNpemVXaGVuUmVzaXplKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXBJbm5lci5wYXJlbnQoKS5vbih7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlUG9wdXAoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cElubmVyLm9uKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCBldmVudCApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXBDbG9zZS5vbih7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfYWRkaW5nVmFyaWFibGVzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IF9nYWxsZXJ5V3JhcC5hdHRyKCAnZGF0YS1sb2FkZWQtdHlwZScgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXAgPSAkKCAnPGRpdiBjbGFzcz1cInN3aXBlci1wb3B1cFwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzd2lwZXItY29udGFpbmVyXCI+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzd2lwZXItd3JhcHBlclwiPjwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLXBhZ2luYXRpb25cIj48L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN3aXBlci1idXR0b24tbmV4dFwiPjwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLWJ1dHRvbi1wcmV2XCI+PC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4nICk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyV3JhcHBlciA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci13cmFwcGVyJyApO1xyXG4gICAgICAgICAgICAgICAgX3N3aXBlckNvbnRhaW5lciA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1jb250YWluZXInICk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyUGFnaW5hdGlvbiA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1wYWdpbmF0aW9uJyApO1xyXG4gICAgICAgICAgICAgICAgX3N3aXBlckJ0bk5leHQgPSBfcG9wdXAuZmluZCggJy5zd2lwZXItYnV0dG9uLW5leHQnICk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyQnRuUHJldiA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1idXR0b24tcHJldicgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9hZGRWaWRlbyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYWN0aXZlU2xpZGUgPSBfcG9wdXAuZmluZCggJy5zd2lwZXItc2xpZGUtYWN0aXZlJyApLFxyXG4gICAgICAgICAgICAgICAgICAgIHNyYyA9IGFjdGl2ZVNsaWRlLmZpbmQoICdbZGF0YS1zcmNdJyApLmRhdGEoICdzcmMnICksXHJcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJDb250ZW50ID0gJCggJzxpZnJhbWUgc3JjPVwiJyArIHNyYyArICdcIj4gZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPicgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKCAnLnN3aXBlci1zbGlkZS1hY3RpdmUnICkuZmluZCggJy5zd2lwZXItcG9wdXBfX3ZpZGVvJyApLnByZXBlbmQoIGlubmVyQ29udGVudCApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2J1aWxkUG9wdXAgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF9hZGRpbmdWYXJpYWJsZXMoKTtcclxuICAgICAgICAgICAgICAgIF9jb250ZW50RmlsbGluZygpO1xyXG4gICAgICAgICAgICAgICAgX2luaXRTd2lwZXIoKTtcclxuICAgICAgICAgICAgICAgIF9zd2lwZXIuc2xpZGVUbyggaW5kZXgsIDAgKTtcclxuICAgICAgICAgICAgICAgIF9wb3B1cC5hZGRDbGFzcyggJ2FjdGl2ZScgKTtcclxuICAgICAgICAgICAgICAgIF9zZXRTdHlsZXMoKTtcclxuICAgICAgICAgICAgICAgIF9zd2lwZXIub25SZXNpemUoKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jbG9zZVBvcHVwID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlQ2xhc3MoICdhY3RpdmUnICk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIF9odG1sLmNzcyh7b3ZlcmZsb3c6ICcnLCBwYWRkaW5nUmlnaHQ6ICcnfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY29udGVudEZpbGxpbmcgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICQuZWFjaCggX2xpbmtzLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5uZXJDb250ZW50ID0gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNSQyA9IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWxvYWRlciA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggJCggdGhpcyApLmhhc0NsYXNzKCAnbWVkaWEtZ2FsbGVyeV9faXRlbV92aWRlbycgKSApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlbG9hZGVyID0gJzxpIGNsYXNzPVwiZmEgZmEtc3Bpbm5lciBmYS1zcGluXCI+PC9pPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQ29udGVudCA9ICc8ZGl2IGNsYXNzPVwic3dpcGVyLXBvcHVwX192aWRlb1wiLz4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU1JDID0gJ2RhdGEtc3JjPVwiJyArICQodGhpcykuYXR0ciggXCJocmVmXCIgKSArICdcIic7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVsb2FkZXIgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJDb250ZW50ID0gJzxpbWcgc3JjPVwiJyArICQoIHRoaXMgKS5hdHRyKCAnc3JjJyApICsgJ1wiPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTUkMgPSAnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SXRlbSA9ICQoICc8ZGl2IGNsYXNzPVwic3dpcGVyLXNsaWRlXCI+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzd2lwZXItcG9wdXBfX2lubmVyXCIgJyArIGRhdGFTUkMgKyAnPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cInN3aXBlci1wb3B1cF9fY2xvc2VcIj48L2E+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICsgcHJlbG9hZGVyICsgJ1xcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyArIGlubmVyQ29udGVudCArICdcXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3dpcGVyLXNsaWRlX190aXRsZVwiPicgKyAkKCB0aGlzICkuYXR0ciggJ3RpdGxlJyApICsgJzwvc3Bhbj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+JyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfc3dpcGVyV3JhcHBlci5hcHBlbmQoIG5ld0l0ZW0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3SXRlbS5maW5kKCAnaW1nJyApLm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCB0aGlzICkuYXR0ciggJ2RhdGEtd2lkdGgnLCB0aGlzLndpZHRoICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCB0aGlzICkuYXR0ciggJ2RhdGEtaGVpZ2h0JywgdGhpcy5oZWlnaHQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRQaWN0dXJlU2l6ZSggdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsICQoIHRoaXMgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfYm9keS5hcHBlbmQoIF9wb3B1cCApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cElubmVyID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLXBvcHVwX19pbm5lcicgKTtcclxuICAgICAgICAgICAgICAgIF9wb3B1cENsb3NlID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLXBvcHVwX19jbG9zZScgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICksXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsYmFyV2lkdGggPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxiYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoIHNjcm9sbERpdiApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhcldpZHRoO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdFN3aXBlciA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgX3N3aXBlciA9IG5ldyBTd2lwZXIoIF9zd2lwZXJDb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiBfc3dpcGVyUGFnaW5hdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBuZXh0QnV0dG9uOiBfc3dpcGVyQnRuTmV4dCxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uOiBfc3dpcGVyQnRuUHJldixcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25DbGlja2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgb25TbGlkZUNoYW5nZUVuZDogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlbW92ZVZpZGVvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJCggJy5zd2lwZXItc2xpZGUtYWN0aXZlJyApLmZpbmQoICdbZGF0YS1zcmNdJyApLmxlbmd0aCApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FkZFZpZGVvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2J1aWxkUG9wdXAoKTtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3JlbW92ZVZpZGVvID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBfcG9wdXAuZmluZCggJy5zd2lwZXItc2xpZGUnICksXHJcbiAgICAgICAgICAgICAgICAgICAgdmlkZW9GcmFtZSA9IGl0ZW1zLmZpbmQoICcuc3dpcGVyLXBvcHVwX192aWRlbyBpZnJhbWUnICk7XHJcbiAgICAgICAgICAgICAgICB2aWRlb0ZyYW1lLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldFBpY3R1cmVTaXplID0gZnVuY3Rpb24oIHBpY1dpZHRoLCBwaWNIZWlnaHQsIHBpYyApe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBrID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoICggX3BvcHVwLndpZHRoKCkvcGljV2lkdGggKSA+ICggX3BvcHVwLmhlaWdodCgpL3BpY0hlaWdodCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSBfcG9wdXAuaGVpZ2h0KCkvcGljSGVpZ2h0IDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IF9wb3B1cC53aWR0aCgpL3BpY1dpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICggayA+PSAxICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBpYy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndpZHRoXCI6IHBpY1dpZHRoKjAuODUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IHBpY0hlaWdodCowLjg1XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGljLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid2lkdGhcIjogaypwaWNXaWR0aCowLjg1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImhlaWdodFwiOiBrKnBpY0hlaWdodCowLjg1XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldFBpY3R1cmVTaXplV2hlblJlc2l6ZSA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBfc3dpcGVyV3JhcHBlci5maW5kKCAnaW1nJyApLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9zZXRQaWN0dXJlU2l6ZSggJCggdGhpcyApLmRhdGEoICd3aWR0aCcgKSwgJCggdGhpcyApLmRhdGEoICdoZWlnaHQnICksICQoIHRoaXMgKSApO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zZXRTdHlsZXMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF9odG1sLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogX2dldFNjcm9sbFdpZHRoKClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuXHJcbiAgICB9O1xyXG5cclxufSApKCk7XHJcbiJdfQ==

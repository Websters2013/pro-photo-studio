!function(){$(function(){$.each($(".partners"),function(){new n($(this))}),$.each($(".mobile-menu"),function(){new e($(this))})});var e=function(e){var n=e,i=$(".mobile-menu-btn"),s=function(){t()},t=function(){i.on("click",function(){$(this).hasClass("close")?c():o()})},o=function(){i.addClass("close"),n.addClass("visible")},c=function(){i.removeClass("close"),n.removeClass("visible")};s()},n=function(e){var n,i=e,s=i.find(".partners__swiper"),t=i.find(".partners__swiper-prev"),o=i.find(".partners__swiper-next"),c=function(){n=new Swiper(s,{autoplay:1e4,speed:500,effect:"slide",slidesPerView:"auto",loop:!0,loopedSlides:20,spaceBetween:80,nextButton:o,prevButton:t})},a=function(){c()};a()}}();
!function(){"use strict";$(function(){$.each($(".media-gallery"),function(){new i($(this))})});var i=function(i){var t=this,n=i,a=n.find(".media-gallery__wrap"),d=n.find(".media-gallery__inner"),o=n.find(".media-gallery__cover"),s=n.find(".media-gallery__check"),l=null,r=$(window),c=n.find(".media-gallery__more"),u=c.attr("href"),p=!1,h=new XMLHttpRequest,f=!0,m=null,v=d.find(".swiper-button-next"),w=d.find(".swiper-button-prev"),g=n.attr("data-loaded-type"),_=!1,y=!1,b=n.find(".preloader"),C=function(i){var e=i.has_items,t=(d.innerHeight(),null),o=null;$.each(i.items,function(i){t=void 0==this.video?this.href:this.video,o=$('<a href="'+t+'" title="'+this.title+'" class="media-gallery__item hidden swiper-slide" style="background-image: url('+this.dummy+');"><span class="media-gallery__item-title">'+this.title+"</span></a>"),this.video&&o.addClass("media-gallery__item_video"),a.append(o)});var s=a.find(".hidden");r.width()>=768&&setTimeout(function(){W(e,s)},50),r.width()<768?j():S(),n.attr("data-loaded-group",+n.attr("data-loaded-group")+1),b.removeClass("active")},T=function(){c.on({click:function(){return P(),!1}}),n.on("click",".media-gallery__item",function(){return e($(this),$(this).index()),!1}),s.on({click:function(){_=!0;var i=$(this);i.hasClass("active")?(i.removeClass("active"),n.attr("data-loaded-type","all"),g="all",r.width()<768?(m.update(),m.updateProgress(),m.slideTo(0)):(x(),S())):(s.removeClass("active"),i.addClass("active"),n.attr("data-loaded-type",i.data("type")),g=i.data("type"),r.width()<768?(m.update(),m.updateProgress(),m.slideTo(0)):(x(),S()))}}),r.on({resize:function(){r.width()<768&&!m?(x(),j()):r.width()>=768&&m?(m.destroy(),m=null,S()):r.width()>=748&&!m&&setTimeout(function(){},700)}})},x=function(){a.isotope("destroy"),p=!1},k=function(){var i=document.createElement("div"),e=null;return i.style.overflowY="scroll",i.style.width="50px",i.style.height="50px",i.style.visibility="hidden",document.body.appendChild(i),e=i.offsetWidth-i.clientWidth,document.body.removeChild(i),e},W=function(i,e){var t=500;f&&(t=1),o.animate({height:a.height()},{duration:t,complete:function(){o.css("height",""),e.each(function(i){B($(this),i)}),0==i&&R()}}),f&&setTimeout(function(){f=!1},500),_=!1},S=function(){var i=a.find(".media-gallery__item");a=n.find(".media-gallery__wrap"),l=".media-gallery__item",r.width()<1200&&r.width()>=768&&i.length<=2?a.isotope({itemSelector:l,masonry:{columnWidth:0,isFitWidth:!0}}):r.width()>=1200&&i.length<=4?a.isotope({itemSelector:l,masonry:{columnWidth:0,isFitWidth:!0}}):a.isotope({itemSelector:l,masonry:{columnWidth:0},layoutMode:"fitRows"}),p=!0},E=function(){P(),T(),n[0].obj=t},P=function(){var i;if(y){y=!1;var e=a.find(".media-gallery__item");e.css("left","auto")}i=n.hasClass("media-gallery_profile")?n.data("action"):u,b.addClass("active"),h.abort(),h=$.ajax({url:i,data:{loadedGroup:n.attr("data-loaded-group")},dataType:"json",timeout:2e4,type:"GET",success:function(i){r.width()+k()>=1e3&&o.height(o.height()),0!==n.attr("data-loaded-group")&&(r.width()>=768&&p?x():m&&(m.destroy(),m=null)),C(i)},error:function(i){"abort"!=i.statusText&&alert("Error!")}})},R=function(){c.css("opacity",0),setTimeout(function(){c.css("padding",0),c.animate({height:0},{duration:500,complete:function(){c.remove()}})},300)},j=function(){m=new Swiper(o,{autoplay:!1,speed:500,effect:"slide",slidesPerView:1,loop:!1,prevButton:w,nextButton:v,onSlideChangeStart:function(i){i.isEnd&&P()}}),m.update()},B=function(i,e){var t=100;f&&(t=1),setTimeout(function(){i.removeClass("hidden")},e*t)};E()},e=function(i,e){var t,n=this,a=i,d=$("body"),o=a.parent(),s=a.parents(".media-gallery"),l=$("html"),r=$(window),c=null,u=null,p=null,h=null,f=null,m=null,v=null,w=null,g=null,_=function(){r.on({resize:function(){R()}}),u.parent().on({click:function(){T()}}),u.on({click:function(i){i.stopPropagation()}}),p.on({click:function(){return T(),!1}})},y=function(){var i=s.attr("data-loaded-type");"all"==i?t=o.find(".media-gallery__item"):"photo"==i?t=o.find(".media-gallery__item:not(.media-gallery__item_video)"):"video"==i&&(t=o.find(".media-gallery__item_video")),c=$('<div class="swiper-popup">                                    <div class="swiper-container">                                        <div class="swiper-wrapper"></div>                                        <div class="swiper-pagination"></div>                                        <div class="swiper-button-next"></div>                                        <div class="swiper-button-prev"></div>                                    </div>                                </div>'),h=c.find(".swiper-wrapper"),f=c.find(".swiper-container"),m=c.find(".swiper-pagination"),v=c.find(".swiper-button-next"),w=c.find(".swiper-button-prev")},b=function(){var i=c.find(".swiper-slide-active"),e=i.find("[data-src]").data("src"),t=$('<iframe src="'+e+'"> frameborder="0" allowfullscreen></iframe>');$(".swiper-slide-active").find(".swiper-popup__video").prepend(t)},C=function(){y(),x(),W(),g.slideTo(e,0),c.addClass("active"),j(),g.onResize()},T=function(){c.removeClass("active"),setTimeout(function(){l.css({overflow:"",paddingRight:""}),c.remove()},300)},x=function(){$.each(t,function(){var i=null,e=null,t=null;$(this).hasClass("media-gallery__item_video")?(t='<i class="fa fa-spinner fa-spin"></i>',i='<div class="swiper-popup__video"/>',e='data-src="'+$(this).attr("href")+'"'):(t="",i='<img src="'+$(this).attr("href")+'">',e="");var n=$('<div class="swiper-slide">                                        <div class="swiper-popup__inner" '+e+'>                                            <a href="#" class="swiper-popup__close"></a>                                            '+t+"                                            "+i+'                                            <span class="swiper-slide__title">'+$(this).attr("title")+"</span>                                        </div>                                    </div>");h.append(n),n.find("img").on({load:function(){$(this).attr("data-width",this.width),$(this).attr("data-height",this.height),P(this.width,this.height,$(this))}})}),d.append(c),u=c.find(".swiper-popup__inner"),p=c.find(".swiper-popup__close")},k=function(){var i=document.createElement("div"),e=null;return document.body.appendChild(i),e=i.offsetWidth-i.clientWidth,document.body.removeChild(i),e},W=function(){g=new Swiper(f,{pagination:m,nextButton:v,prevButton:w,slidesPerView:1,paginationClickable:!0,onSlideChangeEnd:function(){E(),$(".swiper-slide-active").find("[data-src]").length&&b()}})},S=function(){C(),_(),a[0].obj=n},E=function(){var i=c.find(".swiper-slide"),e=i.find(".swiper-popup__video iframe");e.remove()},P=function(i,e,t){var n=0;n=c.width()/i>c.height()/e?c.height()/e:c.width()/i,n>=1?t.css({width:.85*i,height:.85*e}):t.css({width:n*i*.85,height:n*e*.85})},R=function(){$.each(h.find("img"),function(){P($(this).data("width"),$(this).data("height"),$(this))})},j=function(){l.css({overflow:"hidden",paddingRight:k()})};S()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5pbmRleC5qcyIsImpxdWVyeS5tZWRpYS1nYWxsZXJ5LmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiU2xpZGVycyIsInRoaXMiLCJNZW51Iiwib2JqIiwiX29iaiIsIl9idG4iLCJfY29uc3RydWN0b3IiLCJfb25FdmVudHMiLCJvbiIsImhhc0NsYXNzIiwiX2Nsb3NlTWVudSIsIl9vcGVuTWVudSIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJfcGFydG5lcnMiLCJfcGFydG5lcnNTbGlkZXIiLCJmaW5kIiwiX3BhcnRuZXJzUHJldiIsIl9wYXJ0bmVyc05leHQiLCJfaW5pdFNsaWRlciIsIlN3aXBlciIsImF1dG9wbGF5Iiwic3BlZWQiLCJlZmZlY3QiLCJzbGlkZXNQZXJWaWV3IiwibG9vcCIsImxvb3BlZFNsaWRlcyIsInNwYWNlQmV0d2VlbiIsIm5leHRCdXR0b24iLCJwcmV2QnV0dG9uIiwiX2luaXQiLCJNZWRpYUdhbGxlcnkiLCJfc2VsZiIsIl93cmFwcGVyIiwiX2lubmVyV3JhcHBlciIsIl9jb3ZlciIsIl9idG5DaGVjayIsIl9nYWxsZXJ5SXRlbUNsYXNzIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9idG5Nb3JlIiwiX2J0bkFjdGlvbiIsImF0dHIiLCJfaXNHYWxsZXJ5IiwiX3JlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIl9maXJzdEdyb3VwIiwiX3N3aXBlciIsIl9zd2lwZXJOZXh0QnRuIiwiX3N3aXBlclByZXZCdG4iLCJfc3dpdGNoZXJUeXBlIiwiX2J0bkNoZWNrQ2xpY2siLCJfY2VudGVyZWRCbG9ja3MiLCJfcHJlbG9hZGVyIiwiX2FkZEdhbGxlcnlDb250ZW50IiwibXNnIiwiaGFzSXRlbXMiLCJoYXNfaXRlbXMiLCJwYXRoIiwiaW5uZXJIZWlnaHQiLCJuZXdCbG9jayIsIml0ZW1zIiwiaSIsInVuZGVmaW5lZCIsInZpZGVvIiwiaHJlZiIsInRpdGxlIiwiZHVtbXkiLCJhcHBlbmQiLCJuZXdJdGVtcyIsIndpZHRoIiwic2V0VGltZW91dCIsIl9oZWlnaHRBbmltYXRpb24iLCJfaW5pdFN3aXBlciIsIl9pbml0R2FsbGVyeSIsIl9hZGRFdmVudHMiLCJjbGljayIsIl9sb2FkTmV3SXRlbXMiLCJTd2lwZXJQb3B1cCIsImluZGV4IiwiY3VyRWxlbSIsInVwZGF0ZSIsInVwZGF0ZVByb2dyZXNzIiwic2xpZGVUbyIsIl9kZXN0cm95R2FsbGVyeSIsImRhdGEiLCJyZXNpemUiLCJkZXN0cm95IiwiaXNvdG9wZSIsIl9nZXRTY3JvbGxXaWR0aCIsImRpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNjcm9sbFdpZHRoIiwic3R5bGUiLCJvdmVyZmxvd1kiLCJoZWlnaHQiLCJ2aXNpYmlsaXR5IiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiZHVyYXRpb24iLCJhbmltYXRlIiwiY29tcGxldGUiLCJjc3MiLCJfc2hvd05ld0l0ZW1zIiwiX3JlbW92ZUJ0bk1vcmUiLCJsZW5ndGgiLCJpdGVtU2VsZWN0b3IiLCJtYXNvbnJ5IiwiY29sdW1uV2lkdGgiLCJpc0ZpdFdpZHRoIiwibGF5b3V0TW9kZSIsImFib3J0IiwiYWpheCIsInVybCIsImxvYWRlZEdyb3VwIiwiZGF0YVR5cGUiLCJ0aW1lb3V0IiwidHlwZSIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1c1RleHQiLCJhbGVydCIsInJlbW92ZSIsIm9uU2xpZGVDaGFuZ2VTdGFydCIsInN3aXBlciIsImlzRW5kIiwiaXRlbSIsImRlbGF5IiwiX2xpbmtzIiwiX2JvZHkiLCJwYXJlbnQiLCJfZ2FsbGVyeVdyYXAiLCJwYXJlbnRzIiwiX2h0bWwiLCJfcG9wdXAiLCJfcG9wdXBJbm5lciIsIl9wb3B1cENsb3NlIiwiX3N3aXBlcldyYXBwZXIiLCJfc3dpcGVyQ29udGFpbmVyIiwiX3N3aXBlclBhZ2luYXRpb24iLCJfc3dpcGVyQnRuTmV4dCIsIl9zd2lwZXJCdG5QcmV2IiwiX3NldFBpY3R1cmVTaXplV2hlblJlc2l6ZSIsIl9jbG9zZVBvcHVwIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJfYWRkaW5nVmFyaWFibGVzIiwiX2FkZFZpZGVvIiwiYWN0aXZlU2xpZGUiLCJzcmMiLCJpbm5lckNvbnRlbnQiLCJwcmVwZW5kIiwiX2J1aWxkUG9wdXAiLCJfY29udGVudEZpbGxpbmciLCJfc2V0U3R5bGVzIiwib25SZXNpemUiLCJvdmVyZmxvdyIsInBhZGRpbmdSaWdodCIsImRhdGFTUkMiLCJwcmVsb2FkZXIiLCJuZXdJdGVtIiwibG9hZCIsIl9zZXRQaWN0dXJlU2l6ZSIsInNjcm9sbERpdiIsInNjcm9sbGJhcldpZHRoIiwicGFnaW5hdGlvbiIsInBhZ2luYXRpb25DbGlja2FibGUiLCJvblNsaWRlQ2hhbmdlRW5kIiwiX3JlbW92ZVZpZGVvIiwidmlkZW9GcmFtZSIsInBpY1dpZHRoIiwicGljSGVpZ2h0IiwicGljIiwiayJdLCJtYXBwaW5ncyI6IkNBQUEsV0FFSUEsRUFBRyxXQUVDQSxFQUFFQyxLQUFNRCxFQUFHLGFBQWUsV0FDdEIsR0FBSUUsR0FBVUYsRUFBR0csU0FHckJILEVBQUVDLEtBQU1ELEVBQUcsZ0JBQWtCLFdBQ3pCLEdBQUlJLEdBQU9KLEVBQUdHLFVBS3RCLElBQUlDLEdBQU8sU0FBVUMsR0FHakIsR0FBSUMsR0FBT0QsRUFDUEUsRUFBT1AsRUFBRyxvQkFHVlEsRUFBZSxXQUNYQyxLQUVKQSxFQUFZLFdBRVJGLEVBQUtHLEdBQUksUUFBUyxXQUVUVixFQUFHRyxNQUFNUSxTQUFVLFNBQ3BCQyxJQUVBQyxPQU1aQSxFQUFZLFdBQ1JOLEVBQUtPLFNBQVUsU0FDZlIsRUFBS1EsU0FBVSxZQUVuQkYsRUFBYSxXQUNUTCxFQUFLUSxZQUFhLFNBQ2xCVCxFQUFLUyxZQUFhLFdBTzFCUCxNQUlBTixFQUFVLFNBQVVHLEdBR3BCLEdBSUlXLEdBSkFWLEVBQU9ELEVBQ1BZLEVBQWtCWCxFQUFLWSxLQUFNLHFCQUM3QkMsRUFBZ0JiLEVBQUtZLEtBQU0sMEJBQzNCRSxFQUFnQmQs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QUVGLEVBQVUsT0FNbEM3QixFQUE0QixXQUV4QnBKLEVBQUVDLEtBQU04SSxFQUFlN0gsS0FBTSxPQUFTLFdBRWxDc0osRUFBaUJ4SyxFQUFHRyxNQUFPb0YsS0FBTSxTQUFXdkYsRUFBR0csTUFBT29GLEtBQU0sVUFBWXZGLEVBQUdHLFVBS25GNkosRUFBYSxXQUVUckIsRUFBTS9CLEtBQ0ZzRCxTQUFVLFNBQ1ZDLGFBQWN4RSxNQUsxQjNEIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiggZnVuY3Rpb24oKXtcblxuICAgICQoIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgJC5lYWNoKCAkKCAnLnBhcnRuZXJzJyApLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5ldyBTbGlkZXJzICggJCggdGhpcyApICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoICcubW9iaWxlLW1lbnUnICksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IE1lbnUgKCAkKCB0aGlzICkgKTtcbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xuXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiggb2JqICl7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfYnRuID0gJCggJy5tb2JpbGUtbWVudS1idG4nICk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIF9idG4ub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggJCggdGhpcykuaGFzQ2xhc3MoICdjbG9zZScgKSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5NZW51KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vcGVuTWVudSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX2J0bi5hZGRDbGFzcyggJ2Nsb3NlJyApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICd2aXNpYmxlJyApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jbG9zZU1lbnUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIF9idG4ucmVtb3ZlQ2xhc3MoICdjbG9zZScgKTtcbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAndmlzaWJsZScgKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfY29uc3RydWN0b3IoKTtcblxuICAgIH07XG5cbiAgICB2YXIgU2xpZGVycyA9IGZ1bmN0aW9uKCBvYmogKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfcGFydG5lcnNTbGlkZXIgPSBfb2JqLmZpbmQoICcucGFydG5lcnNfX3N3aXBlcicgKSxcbiAgICAgICAgICAgIF9wYXJ0bmVyc1ByZXYgPSBfb2JqLmZpbmQoICcucGFydG5lcnNfX3N3aXBlci1wcmV2JyApLFxuICAgICAgICAgICAgX3BhcnRuZXJzTmV4dCA9IF9vYmouZmluZCggJy5wYXJ0bmVyc19fc3dpcGVyLW5leHQnICksXG4gICAgICAgICAgICBfcGFydG5lcnM7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9pbml0U2xpZGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfcGFydG5lcnMgPSBuZXcgU3dpcGVyICggX3BhcnRuZXJzU2xpZGVyLCB7XG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiAxMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiAnc2xpZGUnLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGxvb3BlZFNsaWRlczogMjAsXG4gICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogODAsXG4gICAgICAgICAgICAgICAgICAgIG5leHRCdXR0b246IF9wYXJ0bmVyc05leHQsXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9wYXJ0bmVyc1ByZXZcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9pbml0U2xpZGVyKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTsiLCIoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgJChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICQuZWFjaCggJCggJy5tZWRpYS1nYWxsZXJ5JyApLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgbmV3IE1lZGlhR2FsbGVyeSAoICQoIHRoaXMgKSApXHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdmFyIE1lZGlhR2FsbGVyeSA9IGZ1bmN0aW9uKCBvYmogKSB7XHJcblxyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF93cmFwcGVyID0gX29iai5maW5kKCAnLm1lZGlhLWdhbGxlcnlfX3dyYXAnICksXHJcbiAgICAgICAgICAgIF9pbm5lcldyYXBwZXIgPSBfb2JqLmZpbmQoICcubWVkaWEtZ2FsbGVyeV9faW5uZXInICksXHJcbiAgICAgICAgICAgIF9jb3ZlciA9IF9vYmouZmluZCggJy5tZWRpYS1nYWxsZXJ5X19jb3ZlcicgKSxcclxuICAgICAgICAgICAgX2J0bkNoZWNrID0gX29iai5maW5kKCAnLm1lZGlhLWdhbGxlcnlfX2NoZWNrJyApLFxyXG4gICAgICAgICAgICBfZ2FsbGVyeUl0ZW1DbGFzcyA9IG51bGwsXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcclxuICAgICAgICAgICAgX2J0bk1vcmUgPSBfb2JqLmZpbmQoICcubWVkaWEtZ2FsbGVyeV9fbW9yZScgKSxcclxuICAgICAgICAgICAgX2J0bkFjdGlvbiA9IF9idG5Nb3JlLmF0dHIoICdocmVmJyApLFxyXG4gICAgICAgICAgICBfaXNHYWxsZXJ5ID0gZmFsc2UsXHJcbiAgICAgICAgICAgIF9yZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXHJcbiAgICAgICAgICAgIF9maXJzdEdyb3VwID0gdHJ1ZSxcclxuICAgICAgICAgICAgX3N3aXBlciA9IG51bGwsXHJcbiAgICAgICAgICAgIF9zd2lwZXJOZXh0QnRuID0gX2lubmVyV3JhcHBlci5maW5kKCAnLnN3aXBlci1idXR0b24tbmV4dCcgKSxcclxuICAgICAgICAgICAgX3N3aXBlclByZXZCdG4gPSBfaW5uZXJXcmFwcGVyLmZpbmQoICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyApLFxyXG4gICAgICAgICAgICBfc3dpdGNoZXJUeXBlID0gX29iai5hdHRyKCAnZGF0YS1sb2FkZWQtdHlwZScgKSxcclxuICAgICAgICAgICAgX2J0bkNoZWNrQ2xpY2sgPSBmYWxzZSxcclxuICAgICAgICAgICAgX2NlbnRlcmVkQmxvY2tzID0gZmFsc2UsXHJcbiAgICAgICAgICAgIF9wcmVsb2FkZXIgPSBfb2JqLmZpbmQoICcucHJlbG9hZGVyJyApO1xyXG5cclxuICAgICAgICB2YXIgX2FkZEdhbGxlcnlDb250ZW50ID0gZnVuY3Rpb24oIG1zZyApe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBoYXNJdGVtcyA9IG1zZy5oYXNfaXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlckhlaWdodCA9IF9pbm5lcldyYXBwZXIuaW5uZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgICAgICBwYXRoID0gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBuZXdCbG9jayA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBtc2cuaXRlbXMsIGZ1bmN0aW9uKCBpICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy52aWRlbyA9PSB1bmRlZmluZWQgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSB0aGlzLmhyZWY7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gdGhpcy52aWRlbztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdCbG9jayA9ICQoICc8YSBocmVmPVwiJyArIHBhdGggKyAnXCIgdGl0bGU9XCInICsgdGhpcy50aXRsZSArICdcIiBjbGFzcz1cIm1lZGlhLWdhbGxlcnlfX2l0ZW0gaGlkZGVuIHN3aXBlci1zbGlkZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCcgKyB0aGlzLmR1bW15ICsgJyk7XCI+PHNwYW4gY2xhc3M9XCJtZWRpYS1nYWxsZXJ5X19pdGVtLXRpdGxlXCI+JyArIHRoaXMudGl0bGUgKyAnPC9zcGFuPjwvYT4nICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy52aWRlbyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdCbG9jay5hZGRDbGFzcyggJ21lZGlhLWdhbGxlcnlfX2l0ZW1fdmlkZW8nICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBfd3JhcHBlci5hcHBlbmQoIG5ld0Jsb2NrICk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBuZXdJdGVtcyA9IF93cmFwcGVyLmZpbmQoICcuaGlkZGVuJyApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX3dpbmRvdy53aWR0aCgpID49IDc2OCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oZWlnaHRBbmltYXRpb24oIGhhc0l0ZW1zLCBuZXdJdGVtcyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LCA1MCApO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cud2lkdGgoKSA8IDc2OCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2luaXRTd2lwZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfaW5pdEdhbGxlcnkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLmF0dHIoICdkYXRhLWxvYWRlZC1ncm91cCcsICtfb2JqLmF0dHIoICdkYXRhLWxvYWRlZC1ncm91cCcgKSsxICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3ByZWxvYWRlci5yZW1vdmVDbGFzcyggJ2FjdGl2ZScgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfYnRuTW9yZS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2xvYWROZXdJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCAnY2xpY2snLCAnLm1lZGlhLWdhbGxlcnlfX2l0ZW0nLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgU3dpcGVyUG9wdXAoICQoIHRoaXMgKSwgJCggdGhpcyApLmluZGV4KCkgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9idG5DaGVjay5vbigge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYnRuQ2hlY2tDbGljayA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VyRWxlbSA9ICQoIHRoaXMgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY3VyRWxlbS5oYXNDbGFzcyggJ2FjdGl2ZScgKSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hdHRyKCAnZGF0YS1sb2FkZWQtdHlwZScsICdhbGwnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpdGNoZXJUeXBlID0gJ2FsbCc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfd2luZG93LndpZHRoKCkgPCA3NjggICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVyLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXIudXBkYXRlUHJvZ3Jlc3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVyLnNsaWRlVG8oIDAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGVzdHJveUdhbGxlcnkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaW5pdEdhbGxlcnkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2J0bkNoZWNrLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyRWxlbS5hZGRDbGFzcyggJ2FjdGl2ZScgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYXR0ciggJ2RhdGEtbG9hZGVkLXR5cGUnLCBjdXJFbGVtLmRhdGEoICd0eXBlJyApICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpdGNoZXJUeXBlID0gY3VyRWxlbS5kYXRhKCAndHlwZScgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cud2lkdGgoKSA8IDc2OCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVyLnVwZGF0ZVByb2dyZXNzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci5zbGlkZVRvKCAwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Rlc3Ryb3lHYWxsZXJ5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2luaXRHYWxsZXJ5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cud2lkdGgoKSA8IDc2OCAmJiAhX3N3aXBlciApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGVzdHJveUdhbGxlcnkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pbml0U3dpcGVyKCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggX3dpbmRvdy53aWR0aCgpID49IDc2OCAmJiBfc3dpcGVyICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXIuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaW5pdEdhbGxlcnkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gX2NoZWNrQ2VudGVyQmxvY2tzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBfd2luZG93LndpZHRoKCkgPj0gNzQ4ICYmICFfc3dpcGVyICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBfY2hlY2tDZW50ZXJCbG9ja3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDcwMCApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2Rlc3Ryb3lHYWxsZXJ5ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dyYXBwZXIuaXNvdG9wZSggJ2Rlc3Ryb3knICk7XHJcbiAgICAgICAgICAgICAgICBfaXNHYWxsZXJ5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfZ2V0U2Nyb2xsV2lkdGggPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFdpZHRoID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBkaXYuc3R5bGUub3ZlcmZsb3dZID0gJ3Njcm9sbCc7XHJcbiAgICAgICAgICAgICAgICBkaXYuc3R5bGUud2lkdGggPSAnNTBweCc7XHJcbiAgICAgICAgICAgICAgICBkaXYuc3R5bGUuaGVpZ2h0ID0gJzUwcHgnO1xyXG4gICAgICAgICAgICAgICAgZGl2LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIGRpdiApO1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsV2lkdGggPSBkaXYub2Zmc2V0V2lkdGggLSBkaXYuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKCBkaXYgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxXaWR0aCA7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9oZWlnaHRBbmltYXRpb24gPSBmdW5jdGlvbiggaGFzSXRlbXMsIG5ld0l0ZW1zICl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gNTAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX2ZpcnN0R3JvdXAgKXtcclxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IDFcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfY292ZXIuYW5pbWF0ZSgge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogX3dyYXBwZXIuaGVpZ2h0KClcclxuICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY292ZXIuY3NzKCAnaGVpZ2h0JywgJycgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0l0ZW1zLmVhY2goIGZ1bmN0aW9uKCBpICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvd05ld0l0ZW1zKCAkKCB0aGlzICksaSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGhhc0l0ZW1zID09IDAgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZW1vdmVCdG5Nb3JlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX2ZpcnN0R3JvdXAgKXtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2ZpcnN0R3JvdXAgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9LDUwMCApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9idG5DaGVja0NsaWNrID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdEdhbGxlcnkgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBfd3JhcHBlci5maW5kKCAnLm1lZGlhLWdhbGxlcnlfX2l0ZW0nICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dyYXBwZXIgPSBfb2JqLmZpbmQoICcubWVkaWEtZ2FsbGVyeV9fd3JhcCcgKTtcclxuICAgICAgICAgICAgICAgIF9nYWxsZXJ5SXRlbUNsYXNzID0gJy5tZWRpYS1nYWxsZXJ5X19pdGVtJztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cud2lkdGgoKSA8IDEyMDAgJiYgX3dpbmRvdy53aWR0aCgpID49IDc2OCAgJiYgaXRlbXMubGVuZ3RoIDw9IDIgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXBwZXIuaXNvdG9wZSgge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtU2VsZWN0b3I6IF9nYWxsZXJ5SXRlbUNsYXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNvbnJ5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5XaWR0aDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRml0V2lkdGg6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIF93aW5kb3cud2lkdGgoKSA+PSAxMjAwICAmJiBpdGVtcy5sZW5ndGggPD0gNCApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfd3JhcHBlci5pc290b3BlKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1TZWxlY3RvcjogX2dhbGxlcnlJdGVtQ2xhc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc29ucnk6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbldpZHRoOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNGaXRXaWR0aDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3dyYXBwZXIuaXNvdG9wZSgge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtU2VsZWN0b3I6IF9nYWxsZXJ5SXRlbUNsYXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNvbnJ5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5XaWR0aDogMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRNb2RlOiAnZml0Um93cydcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX2lzR2FsbGVyeSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9fY2hlY2tDZW50ZXJCbG9ja3MoKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jaGVja0NlbnRlckJsb2NrcyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cud2lkdGgoKSA8IDEyMDAgJiYgX3dpbmRvdy53aWR0aCgpID49IDc2OCApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBfd3JhcHBlci5maW5kKCAnLm1lZGlhLWdhbGxlcnlfX2l0ZW0nICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbXMubGVuZ3RoID09IDEgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5jc3MoICdsZWZ0JywgKCBfd3JhcHBlci53aWR0aCgpIC0gaXRlbXMud2lkdGgoKSAtIDE0ICkgLyAyIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggaXRlbXMubGVuZ3RoID09IDIgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5lcSggMCApLmNzcyggJ2xlZnQnLCAoIF93cmFwcGVyLndpZHRoKCkgLSBpdGVtcy53aWR0aCgpICogMiApIC8gMiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5lcSggMSApLmNzcyggJ2xlZnQnLCAoIF93cmFwcGVyLndpZHRoKCkgLSA2ICkgLyAyICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2NlbnRlcmVkQmxvY2tzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBfd2luZG93LndpZHRoKCkgPj0gMTIwMCApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBfd3JhcHBlci5maW5kKCAnLm1lZGlhLWdhbGxlcnlfX2l0ZW0nICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbXMubGVuZ3RoID09IDEgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5jc3MoICdsZWZ0JywgKCBfd3JhcHBlci53aWR0aCgpIC0gaXRlbXMud2lkdGgoKSAtIDE0ICkgLyAyIClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggaXRlbXMubGVuZ3RoID09IDIgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5lcSggMCApLmNzcyggJ2xlZnQnLCAoIF93cmFwcGVyLndpZHRoKCkgLSBpdGVtcy53aWR0aCgpICogMiApIC8gMiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5lcSggMSApLmNzcyggJ2xlZnQnLCAoIF93cmFwcGVyLndpZHRoKCkgLSA2ICkgLyAyICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGl0ZW1zLmxlbmd0aCA9PSAzICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMuZXEoIDAgKS5jc3MoICdsZWZ0JywgKCBfd3JhcHBlci53aWR0aCgpIC0gaXRlbXMud2lkdGgoKSAqIDMgKSAvIDIgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMuZXEoIDEgKS5jc3MoICdsZWZ0JywgKCBfd3JhcHBlci53aWR0aCgpIC0gaXRlbXMud2lkdGgoKSAtIDYgKSAvIDIgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMuZXEoIDIgKS5jc3MoICdsZWZ0JywgKCBfd3JhcHBlci53aWR0aCgpICsgaXRlbXMud2lkdGgoKSAtIDYgKSAvIDIgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggaXRlbXMubGVuZ3RoID09IDQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5lcSggMCApLmNzcyggJ2xlZnQnLCAoIF93cmFwcGVyLndpZHRoKCkgLSBpdGVtcy53aWR0aCgpICogNCApIC8gMiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5lcSggMSApLmNzcyggJ2xlZnQnLCAoIF93cmFwcGVyLndpZHRoKCkgLSBpdGVtcy53aWR0aCgpICogMiApIC8gMiApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5lcSggMiApLmNzcyggJ2xlZnQnLCAoIF93cmFwcGVyLndpZHRoKCkgLSA2ICkgLyAyICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLmVxKCAzICkuY3NzKCAnbGVmdCcsICggX3dyYXBwZXIud2lkdGgoKSArIGl0ZW1zLndpZHRoKCkgKiAyIC0gNiApIC8gMiApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9jZW50ZXJlZEJsb2NrcyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX2xvYWROZXdJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9sb2FkTmV3SXRlbXMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwYXRoO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX2NlbnRlcmVkQmxvY2tzICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9jZW50ZXJlZEJsb2NrcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBfd3JhcHBlci5maW5kKCAnLm1lZGlhLWdhbGxlcnlfX2l0ZW0nICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLmNzcyggJ2xlZnQnLCAnYXV0bycgKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBfb2JqLmhhc0NsYXNzKCAnbWVkaWEtZ2FsbGVyeV9wcm9maWxlJyApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSBfb2JqLmRhdGEoICdhY3Rpb24nICk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBwYXRoID0gX2J0bkFjdGlvblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9wcmVsb2FkZXIuYWRkQ2xhc3MoICdhY3RpdmUnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIF9yZXF1ZXN0ID0gJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IHBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWRHcm91cDogX29iai5hdHRyKCAnZGF0YS1sb2FkZWQtZ3JvdXAnIClcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMjAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIG1zZyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgKyBfZ2V0U2Nyb2xsV2lkdGgoKSA+PSAxMDAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvdmVyLmhlaWdodCggX2NvdmVyLmhlaWdodCgpICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggX29iai5hdHRyKCAnZGF0YS1sb2FkZWQtZ3JvdXAnICkgIT09IDAgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cud2lkdGgoKSA+PSA3NjggJiYgX2lzR2FsbGVyeSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Rlc3Ryb3lHYWxsZXJ5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBfc3dpcGVyICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRHYWxsZXJ5Q29udGVudCggbXNnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICggWE1MSHR0cFJlcXVlc3QgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9ICdhYm9ydCcgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCggJ0Vycm9yIScgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3JlbW92ZUJ0bk1vcmUgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF9idG5Nb3JlLmNzcyggJ29wYWNpdHknLCAwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2J0bk1vcmUuY3NzKCAncGFkZGluZycsIDAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2J0bk1vcmUuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYnRuTW9yZS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCAzMDAgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0U3dpcGVyID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9zd2lwZXIgPSBuZXcgU3dpcGVyICggX2NvdmVyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWVkOiA1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiAnc2xpZGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkJ1dHRvbjogX3N3aXBlclByZXZCdG4sXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX3N3aXBlck5leHRCdG4sXHJcbiAgICAgICAgICAgICAgICAgICAgb25TbGlkZUNoYW5nZVN0YXJ0OiBmdW5jdGlvbiggc3dpcGVyICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzd2lwZXIuaXNFbmQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvYWROZXdJdGVtcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2hvd05ld0l0ZW1zID0gZnVuY3Rpb24oIGl0ZW0sIGluZGV4ICl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRlbGF5ID0gMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggX2ZpcnN0R3JvdXAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsYXkgPSAxXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5yZW1vdmVDbGFzcyggJ2hpZGRlbicgKTtcclxuICAgICAgICAgICAgICAgIH0sIGluZGV4ICogZGVsYXkgKTtcclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgU3dpcGVyUG9wdXAgPSBmdW5jdGlvbiAoIG9iaiwgaW5kZXggKSB7XHJcblxyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9ib2R5ID0gJCggJ2JvZHknICksXHJcbiAgICAgICAgICAgIF93cmFwcGVyID0gX29iai5wYXJlbnQoKSxcclxuICAgICAgICAgICAgX2dhbGxlcnlXcmFwID0gX29iai5wYXJlbnRzKCAnLm1lZGlhLWdhbGxlcnknICksXHJcbiAgICAgICAgICAgIF9odG1sID0gJCggJ2h0bWwnICksXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcclxuICAgICAgICAgICAgX2xpbmtzLFxyXG4gICAgICAgICAgICBfcG9wdXAgPSBudWxsLFxyXG4gICAgICAgICAgICBfcG9wdXBJbm5lciA9IG51bGwsXHJcbiAgICAgICAgICAgIF9wb3B1cENsb3NlID0gbnVsbCxcclxuICAgICAgICAgICAgX3N3aXBlcldyYXBwZXIgPSBudWxsLFxyXG4gICAgICAgICAgICBfc3dpcGVyQ29udGFpbmVyID0gbnVsbCxcclxuICAgICAgICAgICAgX3N3aXBlclBhZ2luYXRpb24gPSBudWxsLFxyXG4gICAgICAgICAgICBfc3dpcGVyQnRuTmV4dCA9IG51bGwsXHJcbiAgICAgICAgICAgIF9zd2lwZXJCdG5QcmV2ID0gbnVsbCxcclxuICAgICAgICAgICAgX3N3aXBlciA9IG51bGw7XHJcblxyXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRQaWN0dXJlU2l6ZVdoZW5SZXNpemUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cElubmVyLnBhcmVudCgpLm9uKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VQb3B1cCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BvcHVwSW5uZXIub24oe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGV2ZW50ICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cENsb3NlLm9uKHtcclxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9hZGRpbmdWYXJpYWJsZXMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gX2dhbGxlcnlXcmFwLmF0dHIoICdkYXRhLWxvYWRlZC10eXBlJyApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PSAnYWxsJyApe1xyXG4gICAgICAgICAgICAgICAgICAgIF9saW5rcyA9IF93cmFwcGVyLmZpbmQoICcubWVkaWEtZ2FsbGVyeV9faXRlbScgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHR5cGUgPT0gJ3Bob3RvJyApe1xyXG4gICAgICAgICAgICAgICAgICAgIF9saW5rcyA9IF93cmFwcGVyLmZpbmQoICcubWVkaWEtZ2FsbGVyeV9faXRlbTpub3QoLm1lZGlhLWdhbGxlcnlfX2l0ZW1fdmlkZW8pJyApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggdHlwZSA9PSAndmlkZW8nICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX2xpbmtzID0gX3dyYXBwZXIuZmluZCggJy5tZWRpYS1nYWxsZXJ5X19pdGVtX3ZpZGVvJyApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cCA9ICQoICc8ZGl2IGNsYXNzPVwic3dpcGVyLXBvcHVwXCI+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN3aXBlci1jb250YWluZXJcIj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN3aXBlci13cmFwcGVyXCI+PC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzd2lwZXItcGFnaW5hdGlvblwiPjwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLWJ1dHRvbi1uZXh0XCI+PC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzd2lwZXItYnV0dG9uLXByZXZcIj48L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PicgKTtcclxuICAgICAgICAgICAgICAgIF9zd2lwZXJXcmFwcGVyID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLXdyYXBwZXInICk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyQ29udGFpbmVyID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLWNvbnRhaW5lcicgKTtcclxuICAgICAgICAgICAgICAgIF9zd2lwZXJQYWdpbmF0aW9uID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLXBhZ2luYXRpb24nICk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyQnRuTmV4dCA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1idXR0b24tbmV4dCcgKTtcclxuICAgICAgICAgICAgICAgIF9zd2lwZXJCdG5QcmV2ID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2FkZFZpZGVvID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhY3RpdmVTbGlkZSA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1zbGlkZS1hY3RpdmUnICksXHJcbiAgICAgICAgICAgICAgICAgICAgc3JjID0gYWN0aXZlU2xpZGUuZmluZCggJ1tkYXRhLXNyY10nICkuZGF0YSggJ3NyYycgKSxcclxuICAgICAgICAgICAgICAgICAgICBpbm5lckNvbnRlbnQgPSAkKCAnPGlmcmFtZSBzcmM9XCInICsgc3JjICsgJ1wiPiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JyApO1xyXG5cclxuICAgICAgICAgICAgICAgICQoICcuc3dpcGVyLXNsaWRlLWFjdGl2ZScgKS5maW5kKCAnLnN3aXBlci1wb3B1cF9fdmlkZW8nICkucHJlcGVuZCggaW5uZXJDb250ZW50ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfYnVpbGRQb3B1cCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgX2FkZGluZ1ZhcmlhYmxlcygpO1xyXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRGaWxsaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBfaW5pdFN3aXBlcigpO1xyXG4gICAgICAgICAgICAgICAgX3N3aXBlci5zbGlkZVRvKCBpbmRleCwgMCApO1xyXG4gICAgICAgICAgICAgICAgX3BvcHVwLmFkZENsYXNzKCAnYWN0aXZlJyApO1xyXG4gICAgICAgICAgICAgICAgX3NldFN0eWxlcygpO1xyXG4gICAgICAgICAgICAgICAgX3N3aXBlci5vblJlc2l6ZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY2xvc2VQb3B1cCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BvcHVwLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBfaHRtbC5jc3Moe292ZXJmbG93OiAnJywgcGFkZGluZ1JpZ2h0OiAnJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0sIDMwMCApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2NvbnRlbnRGaWxsaW5nID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIF9saW5rcywgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyQ29udGVudCA9IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTUkMgPSBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVsb2FkZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoICQoIHRoaXMgKS5oYXNDbGFzcyggJ21lZGlhLWdhbGxlcnlfX2l0ZW1fdmlkZW8nICkgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWxvYWRlciA9ICc8aSBjbGFzcz1cImZhIGZhLXNwaW5uZXIgZmEtc3BpblwiPjwvaT4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lckNvbnRlbnQgPSAnPGRpdiBjbGFzcz1cInN3aXBlci1wb3B1cF9fdmlkZW9cIi8+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNSQyA9ICdkYXRhLXNyYz1cIicgKyAkKHRoaXMpLmF0dHIoIFwiaHJlZlwiICkgKyAnXCInO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlbG9hZGVyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyQ29udGVudCA9ICc8aW1nIHNyYz1cIicgKyAkKCB0aGlzICkuYXR0ciggJ2hyZWYnICkgKyAnXCI+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNSQyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdJdGVtID0gJCggJzxkaXYgY2xhc3M9XCJzd2lwZXItc2xpZGVcIj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN3aXBlci1wb3B1cF9faW5uZXJcIiAnICsgZGF0YVNSQyArICc+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwic3dpcGVyLXBvcHVwX19jbG9zZVwiPjwvYT5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgKyBwcmVsb2FkZXIgKyAnXFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICsgaW5uZXJDb250ZW50ICsgJ1xcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzd2lwZXItc2xpZGVfX3RpdGxlXCI+JyArICQoIHRoaXMgKS5hdHRyKCAndGl0bGUnICkgKyAnPC9zcGFuPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4nICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9zd2lwZXJXcmFwcGVyLmFwcGVuZCggbmV3SXRlbSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdJdGVtLmZpbmQoICdpbWcnICkub24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCggdGhpcyApLmF0dHIoICdkYXRhLXdpZHRoJywgdGhpcy53aWR0aCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCggdGhpcyApLmF0dHIoICdkYXRhLWhlaWdodCcsIHRoaXMuaGVpZ2h0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0UGljdHVyZVNpemUoIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCAkKCB0aGlzICkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfYm9keS5hcHBlbmQoIF9wb3B1cCApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cElubmVyID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLXBvcHVwX19pbm5lcicgKTtcclxuICAgICAgICAgICAgICAgIF9wb3B1cENsb3NlID0gX3BvcHVwLmZpbmQoICcuc3dpcGVyLXBvcHVwX19jbG9zZScgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICksXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsYmFyV2lkdGggPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxiYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoIHNjcm9sbERpdiApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhcldpZHRoO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdFN3aXBlciA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgX3N3aXBlciA9IG5ldyBTd2lwZXIoIF9zd2lwZXJDb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiBfc3dpcGVyUGFnaW5hdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBuZXh0QnV0dG9uOiBfc3dpcGVyQnRuTmV4dCxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uOiBfc3dpcGVyQnRuUHJldixcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb25DbGlja2FibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgb25TbGlkZUNoYW5nZUVuZDogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlbW92ZVZpZGVvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJCggJy5zd2lwZXItc2xpZGUtYWN0aXZlJyApLmZpbmQoICdbZGF0YS1zcmNdJyApLmxlbmd0aCApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2FkZFZpZGVvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2J1aWxkUG9wdXAoKTtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3JlbW92ZVZpZGVvID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBfcG9wdXAuZmluZCggJy5zd2lwZXItc2xpZGUnICksXHJcbiAgICAgICAgICAgICAgICAgICAgdmlkZW9GcmFtZSA9IGl0ZW1zLmZpbmQoICcuc3dpcGVyLXBvcHVwX192aWRlbyBpZnJhbWUnICk7XHJcbiAgICAgICAgICAgICAgICB2aWRlb0ZyYW1lLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldFBpY3R1cmVTaXplID0gZnVuY3Rpb24oIHBpY1dpZHRoLCBwaWNIZWlnaHQsIHBpYyApe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBrID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoICggX3BvcHVwLndpZHRoKCkvcGljV2lkdGggKSA+ICggX3BvcHVwLmhlaWdodCgpL3BpY0hlaWdodCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSBfcG9wdXAuaGVpZ2h0KCkvcGljSGVpZ2h0IDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IF9wb3B1cC53aWR0aCgpL3BpY1dpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICggayA+PSAxICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBpYy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndpZHRoXCI6IHBpY1dpZHRoKjAuODUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IHBpY0hlaWdodCowLjg1XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGljLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid2lkdGhcIjogaypwaWNXaWR0aCowLjg1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImhlaWdodFwiOiBrKnBpY0hlaWdodCowLjg1XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldFBpY3R1cmVTaXplV2hlblJlc2l6ZSA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBfc3dpcGVyV3JhcHBlci5maW5kKCAnaW1nJyApLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9zZXRQaWN0dXJlU2l6ZSggJCggdGhpcyApLmRhdGEoICd3aWR0aCcgKSwgJCggdGhpcyApLmRhdGEoICdoZWlnaHQnICksICQoIHRoaXMgKSApO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zZXRTdHlsZXMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF9odG1sLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogX2dldFNjcm9sbFdpZHRoKClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuXHJcbiAgICB9O1xyXG5cclxufSApKCk7XHJcbiJdfQ==
